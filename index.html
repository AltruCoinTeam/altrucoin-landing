<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="AltruCoin ‚Äì The Token of Altruism on the Blockchain."/>
  <meta property="og:title" content="AltruCoin"/>
  <meta property="og:description" content="Every transaction supports real-world good."/>
  <meta property="og:image" content="og-image.png"/>
  <link rel="icon" href="favicon.ico"/>
  <title>AltruCoin ‚Äì Token of Altruism</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QBQVD56HTD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-QBQVD56HTD');
  </script>

  <!-- AOS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css"/>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
    :root {
      --primary: #00c2ff;
      --secondary: #7d00ff;
      --background: #181c2f;
      --text: #ffffff;
      --muted: rgba(255,255,255,0.08);
      --border: #2a3350;
    }
    * { margin:0; padding:0; box-sizing:border-box; scroll-behavior:smooth; }
    body {
      font-family:'Inter',sans-serif;
      background:var(--background);
      color:var(--text);
    }
    header {
      background:linear-gradient(135deg, var(--primary), var(--secondary));
      padding:1.5rem;
      text-align:center;
    }
    nav a {
      color:#fff;
      margin:0 12px;
      text-decoration:none;
      font-weight:600;
    }
    .hero {
      padding:100px 20px;
      text-align:center;
      background:linear-gradient(135deg, var(--primary), var(--secondary));
    }
    .hero h1 { font-size:3rem; margin-bottom:1rem; }
    .hero p { font-size:1.2rem; max-width:600px; margin:0 auto 2rem; }
    .cta-button {
      display:inline-block;
      padding:0.75rem 1.5rem;
      background:var(--muted);
      border:2px solid #fff;
      border-radius:12px;
      color:#fff;
      font-weight:700;
      text-decoration:none;
      transition:background 0.3s,transform 0.3s;
    }
    .cta-button:hover {
      background:rgba(255,255,255,0.15);
      transform:translateY(-2px);
    }
    section {
      padding:60px 20px;
      max-width:900px;
      margin:auto;
    }
    section h2 {
      font-size:2rem;
      margin-bottom:1rem;
      border-bottom:2px solid var(--primary);
      padding-bottom:8px;
    }
    .tokenomics {
      display:flex;
      flex-wrap:wrap;
      gap:20px;
      justify-content:center;
    }
    .tokenomics div {
      background:var(--muted);
      padding:20px;
      border-radius:10px;
      text-align:center;
      flex:1 1 220px;
    }
    .pill{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:#12162a;color:#b9c3e6}
    .addr{font-family:ui-monospace,Menlo,Consolas;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:320px}
    .card{background:#12162a;border:1px solid var(--border);border-radius:16px;padding:16px;margin:12px 0}
    input{padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#0d1225;color:#fff;min-width:160px}
    button{padding:10px 14px;border:0;border-radius:10px;background:var(--primary);color:#00111a;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;color:#fff;border:1px solid var(--border)}
    .muted{opacity:.75}
    footer {
      text-align:center;
      padding:40px;
      background:#111;
      color:#aaa;
    }
    ul { padding-left:1.2rem; }
    .copy-button {
      margin-top:10px;
      background:#333;
      color:#fff;
      border:none;
      padding:6px 12px;
      border-radius:6px;
      cursor:pointer;
    }
    .copy-button:hover { background:#444; }
  </style>
</head>
<body>
  <header>
    <nav>
      <a href="#about">About</a>
      <a href="#tokenomics">Tokenomics</a>
      <a href="#buy">Buy</a>
      <a href="#chart">Chart</a>
      <a href="#roadmap">Roadmap</a>
      <a href="#community">Community</a>
      <a href="#faq">FAQ</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <section class="hero" data-aos="fade-up">
    <h1>AltruCoin</h1>
    <p>The Web3 Token of Altruism. Every transaction helps real people, animals, and the planet ‚Äî transparently and on-chain.</p>
  </section>

  <section id="about" data-aos="fade-up">
    <h2>About</h2>
    <p>AltruCoin is a Web3-powered cryptocurrency with a mission: to turn market activity into meaningful charitable impact. Every time someone trades the token, a fee is collected and distributed monthly:</p>
    <ul>
      <li><strong>50%</strong> ‚Äî to verified charities (in USDT)</li>
      <li><strong>25%</strong> ‚Äî for development & audits</li>
      <li><strong>25%</strong> ‚Äî for token buybacks</li>
    </ul>
    <p>Built on BNB Smart Chain for low fees and speed. Token holders drive the mission through DAO voting. Upcoming: UAE foundation registration & AltruScan dashboard.</p>
    <div style="margin-top: 20px; text-align: center;">
      <a class="cta-button" href="Whitepaper.pdf" target="_blank">üìÑ View Whitepaper (PDF)</a>
    </div>
  </section>

  <section id="tokenomics" data-aos="fade-up">
    <h2>Tokenomics</h2>
    <p>All trading fee revenue is distributed monthly:</p>
    <div class="tokenomics">
      <div><strong>50%</strong><br/>Charity (USDT)</div>
      <div><strong>25%</strong><br/>Project & Dev</div>
      <div><strong>25%</strong><br/>Token Buyback</div>
    </div>
    <p style="margin-top:2rem;">Token allocation:</p>
    <div class="tokenomics">
      <div><strong>20%</strong><br/>Private Sale</div>
      <div><strong>30%</strong><br/>Public Launch</div>
      <div><strong>10%</strong><br/>Team (vested)</div>
      <div><strong>40%</strong><br/>Reserve & Ecosystem</div>
    </div>
  </section>

  <!-- BUY SECTION (updated, keeps same anchor) -->
  <section id="buy" data-aos="fade-up">
    <h2>Buy $ALTRU</h2>

    <!-- Network / Account pills -->
    <div style="display:flex;gap:12px;flex-wrap:wrap;margin:8px 0 14px 0">
      <div class="pill"><strong>Network:</strong>&nbsp;<span id="netName">‚Äî</span>&nbsp;(<span id="chainId">‚Äî</span>)</div>
      <div class="pill"><strong>Account:</strong>&nbsp;<span id="account" class="addr">‚Äî</span></div>
    </div>

    <div class="card">
      <div style="display:flex;gap:16px;flex-wrap:wrap;justify-content:space-between">
        <div><b>Presale:</b> <span id="contractAddr" class="addr">‚Äî</span></div>
        <div><b>BNB‚ÜíUSD (oracle):</b> <span id="bnbUsd">‚Äî</span></div>
      </div>
      <div style="display:grid;grid-template-columns:repeat(3,minmax(160px,1fr));gap:12px;margin-top:8px">
        <div><b>Rate</b><br><span id="rateUSDT">‚Äî</span> ALTRU / 1 USDT</div>
        <div><b>Sold</b><br><span id="sold">‚Äî</span> / <span id="cap">‚Äî</span> ALTRU</div>
        <div><b>ALTRU in contract</b><br><span id="balance">‚Äî</span></div>
      </div>
    </div>

    <div class="card">
      <h3>Buy with BNB</h3>
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:6px">
        <input id="bnbAmount" type="number" step="0.0001" placeholder="BNB amount"/>
        <button id="maxBNB" class="ghost">Max BNB</button>
        <button id="buyBNB">Buy</button>
      </div>
      <div class="muted" style="margin-top:6px">Send BNB; tokens are calculated on‚Äëchain via Chainlink BNB/USD √ó rate.</div>
    </div>

    <div class="card">
      <h3>Buy with USDT</h3>
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:6px">
        <input id="usdtAmount" type="number" step="0.01" placeholder="USDT amount"/>
        <button id="maxUSDT" class="ghost">Max USDT</button>
        <button id="buyUSDT_amount">Buy (USDT)</button>
      </div>
      <div class="muted" style="margin:8px 0">Or target an ALTRU amount (auto‚Äëcomputes USDT):</div>
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:6px">
        <input id="altruAmount" type="number" step="100000" value="100000" min="100000" placeholder="ALTRU amount"/>
        <button id="buyUSDT_altru">Buy (ALTRU)</button>
      </div>
      <div class="muted" style="margin-top:6px">We auto‚Äëapprove if allowance is insufficient.</div>
    </div>

    <p id="status" class="muted" style="margin-top:10px;"></p>

    <p style="margin-top:16px">You can buy AltruCoin directly on PancakeSwap:</p>
    <div style="text-align:center; margin: 20px 0;">
      <a class="cta-button" href="https://pancakeswap.finance/swap?outputCurrency=0x24f3F00A8e6E8a37490b2244C7705a7A005dDb4E" target="_blank">üî• Buy on PancakeSwap</a>
    </div>
  </section>

  <section id="chart" data-aos="fade-up">
    <h2>Live Price Chart</h2>
    <div style="width:100%; max-width:800px; margin:auto;">
      <iframe src="https://dexscreener.com/bsc/0x5a59F6581EF65099bE92B491c9B36B4a66727707?embed=1&theme=dark"
              width="100%" height="500" style="border:0;" allowfullscreen></iframe>
    </div>
  </section>

  <section id="roadmap" data-aos="fade-up">
    <h2>Roadmap</h2>
    <ul>
      <li>‚úÖ Token deployment</li>
      <li>üöÄ PancakeSwap listing</li>
      <li>üó≥ DAO governance</li>
      <li>üìä Charity dashboard</li>
      <li>üèõ UAE foundation</li>
    </ul>
  </section>

  <section id="community" data-aos="fade-up">
    <h2>Community</h2>
    <p>Join our growing movement and connect with others who believe in blockchain-powered altruism.</p>
    <div style="display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-bottom:30px;">
      <a class="cta-button" href="https://t.me/AltrucoinGroup" target="_blank">üì¢ Telegram Channel</a>
      <a class="cta-button" href="https://t.me/AltrucoinChat" target="_blank">üí¨ Telegram Chat</a>
    </div>
    <div style="text-align:center;margin-top:20px;">
      <button onclick="addToken()" class="cta-button">ü¶ä Add $ALTRU to MetaMask</button>
    </div>
  </section>

  <!-- Moved OUT of <style>: Liquidity Locked card -->
  <div style="background: #1f1f2e; border-left: 5px solid #00c2ff; padding: 20px; margin: 40px auto; max-width: 800px; border-radius: 12px;" data-aos="fade-up">
    <h3 style="color: #00c2ff; margin-bottom: 10px;">üîí Liquidity Locked</h3>
    <p style="line-height: 1.6; color: #ddd; font-size: 1rem;">
      To ensure long-term trust and prevent rug pulls, the ALTRU/BNB liquidity on PancakeSwap has been locked via PinkLock.
    </p>
    <a href="https://www.pinksale.finance/pinklock/bsc/record/1340541" target="_blank" style="display: inline-block; margin-top: 12px; background: #00c2ff; color: #000; padding: 10px 20px; font-weight: 600; border-radius: 8px; text-decoration: none;">
      üîê View Lock on PinkSale
    </a>
  </div>

  <section id="faq" data-aos="fade-up">
    <h2>FAQ</h2>
    <ul>
      <li><strong>What is AltruCoin?</strong><br/>A crypto token on BNB Smart Chain where every trade supports real charitable causes.</li>
      <li><strong>How are transaction fees used?</strong><br/>5% fee breakdown:<br/>‚Äì 2.5% to charities (in USDT)<br/>‚Äì 2% to development & liquidity<br/>‚Äì 0.5% auto-burn</li>
      <li><strong>Is the token safe?</strong><br/>Yes ‚Äî contract is open-source, verifiable, audited soon.</li>
      <li><strong>How to add ALTRU?</strong><br/>Click the ü¶ä Add to MetaMask button above.</li>
    </ul>
  </section>

  <section id="contact" data-aos="fade-up">
    <h2>Contact</h2>
    <p>üì© For support, partnerships, or media inquiries ‚Äî reach out to us:</p>
    <div style="text-align:center; margin-top:20px;">
      <a href="mailto:support@altrucoin.org" class="cta-button">support@altrucoin.org</a>
    </div>
    <div style="text-align:center; margin-top:40px;">
      <h3>‚ù§Ô∏è Support / Donate</h3>
      <p style="word-break:break-all; font-size:1rem;">0x7c76AA8d29F1F075846ED04446197f4fda047c4d</p>
      <button class="copy-button" onclick="navigator.clipboard.writeText('0x7c76AA8d29F1F075846ED04446197f4fda047c4d')">üìã Copy Address</button>
      <div style="margin-top:20px;">
        <img src="donation-qr.png" alt="QR Code" style="max-width:180px;" />
        <p style="font-size:0.9rem; opacity:0.7;">Scan via MetaMask / Trust Wallet</p>
      </div>
      <p style="margin-top:20px; font-size:0.9rem; opacity:0.6;">
        You can send USDT (BEP-20), BNB or any supported BEP-20 token.<br/>
        Always verify the network and address before sending.
      </p>
      <p>
        <a href="https://bscscan.com/address/0x7c76AA8d29F1F075846ED04446197f4fda047c4d" target="_blank" style="color:var(--primary); text-decoration:underline;">
          üîç View on BscScan
        </a>
      </p>
    </div>
  </section>

  <footer>
    &copy; 2025 AltruCoin ‚Äî Built with purpose. Powered by people.<br/>
    üì© Contact us: <a href="mailto:support@altrucoin.org">support@altrucoin.org</a><br/>
    ‚ù§Ô∏è Donate: 0x7c76AA8d29F1F075846ED04446197f4fda047c4d
  </footer>

  <script>
    async function addToken() {
      try {
        const wasAdded = await window.ethereum.request({
          method: 'wallet_watchAsset',
          params: {
            type: 'ERC20',
            options: {
              address: '0x24f3F00A8e6E8a37490b2244C7705a7A005dDb4E',
              symbol: 'ALTRU',
              decimals: 18,
              image: 'https://altrucoin.org/favicon.ico'
            }
          }
        });
        if (wasAdded) console.log('Token added!');
        else console.log('User rejected token addition');
      } catch (error) {
        console.error(error);
      }
    }
  </script>

  <!-- AOS script -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>AOS.init();</script>

  <!-- Dexscreener price fetch (kept) -->
  <script>
    async function fetchAltruPrice() {
      try {
        const res = await fetch("https://api.dexscreener.com/latest/dex/pairs/bsc/0x5a59F6581EF65099bE92B491c9B36B4a66727707");
        const data = await res.json();
        const price = parseFloat(data.pair.priceUsd);
        const el = document.getElementById("altruPrice");
        if (el) el.innerText = `$${price.toFixed(8)}`;
      } catch (e) {
        console.error("Error fetching ALTRU price:", e);
      }
    }
    fetchAltruPrice();
    setInterval(fetchAltruPrice, 15000);
  </script>

  <!-- ethers.js + widget logic -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
  (async function(){
    const PRESALE_ADDRESS = "0x4D3F586Dc66f41a05d36F960121E2C7F1a5Ab64c";
    const ALTRU_ADDRESS   = "0x24f3F00A8e6E8a37490b2244C7705a7A005dDb4E";
    const USDT_ADDRESS    = "0x55d398326f99059fF775485246999027B3197955";
    const FEED_ADDRESS    = "0x0567F2323251f0Aab15c8dFb1967E4e8A7D42aeE"; // BNB/USD

    const PRESALE_ABI = [
      "event BoughtWithBNB(address indexed buyer, uint256 usdtWei, uint256 amountALTRU, uint256 paidBNB)",
      "event BoughtWithUSDT(address indexed buyer, uint256 usdtWei, uint256 amountALTRU)",
      "function rateUSDT() view returns (uint256)",
      "function hardCapTokens() view returns (uint256)",
      "function soldTokens() view returns (uint256)",
      "function paused() view returns (bool)",
      "function buyWithBNB() payable",
      "function buyWithUSDT(uint256 usdtWei)"
    ];
    const ERC20_ABI = [
      "function balanceOf(address) view returns (uint256)",
      "function approve(address spender, uint256 amount) returns (bool)",
      "function allowance(address owner, address spender) view returns (uint256)",
      "function decimals() view returns (uint8)"
    ];
    const FEED_ABI = [
      "function latestRoundData() view returns (uint80,int256,uint256,uint256,uint80)",
      "function decimals() view returns (uint8)"
    ];

    const $  = id => document.getElementById(id);
    const ok = m => { const s=$('status'); if(!s) return; s.style.color='#6aff9f'; s.textContent=m; };
    const er = m => { const s=$('status'); if(!s) return; s.style.color='crimson'; s.textContent=m; console.error(m); };
    const fmt = (v,d=18)=>{ try{return ethers.utils.formatUnits(v,d)}catch{return String(v)} };
    const toBN = ethers.BigNumber.from;

    if(!window.ethereum){ er('Please install MetaMask'); return; }

    const provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send('eth_requestAccounts', []);
    const signer  = provider.getSigner();

    const presale = new ethers.Contract(PRESALE_ADDRESS, PRESALE_ABI, signer);
    const altru   = new ethers.Contract(ALTRU_ADDRESS,   ERC20_ABI, provider);
    const usdt    = new ethers.Contract(USDT_ADDRESS,    ERC20_ABI, signer);
    const feed    = new ethers.Contract(FEED_ADDRESS,    FEED_ABI,  provider);

    // Indicators
    const net = await provider.getNetwork();
    const acct = await signer.getAddress();
    if($('netName'))  $('netName').textContent = net.name || 'BSC';
    if($('chainId'))  $('chainId').textContent = net.chainId;
    if($('account'))  $('account').textContent = acct;
    if($('contractAddr')) $('contractAddr').textContent = PRESALE_ADDRESS;

    let RATE = await presale.rateUSDT();

    async function refreshStats(){
      try{
        const [cap,sold,bal,rd,dec] = await Promise.all([
          presale.hardCapTokens(),
          presale.soldTokens(),
          altru.balanceOf(PRESALE_ADDRESS),
          feed.latestRoundData(),
          feed.decimals()
        ]);
        if($('rateUSDT')) $('rateUSDT').textContent = RATE.toString();
        if($('cap'))      $('cap').textContent  = Intl.NumberFormat('en-US').format(+fmt(cap));
        if($('sold'))     $('sold').textContent = Intl.NumberFormat('en-US').format(+fmt(sold));
        if($('balance'))  $('balance').textContent = Intl.NumberFormat('en-US').format(+fmt(bal));
        const bnbUsd = Number(rd[1]) / (10 ** Number(dec));
        if($('bnbUsd')) $('bnbUsd').textContent = `$${bnbUsd.toLocaleString('en-US',{maximumFractionDigits:2})} / BNB`;
      }catch(e){ console.warn('refresh failed', e); }
    }
    await refreshStats();

    // Live updates via events + fallback polling
    try{
      presale.on('BoughtWithBNB', async ()=>{ await refreshStats(); });
      presale.on('BoughtWithUSDT', async ()=>{ await refreshStats(); });
    }catch(e){ console.warn('event attach failed', e); }
    provider.on('block', (n)=>{ if(n%6===0) refreshStats(); });

    // Wallet changes
    if(window.ethereum){
      window.ethereum.on('accountsChanged', ()=>location.reload());
      window.ethereum.on('chainChanged',   ()=>location.reload());
    }

    // Actions
    const parseFloatSafe = (v)=>{ const n = Number(v); return isFinite(n)?n:0; };

    // Max BNB: fill input with (balance - gas buffer)
    const bnbInput = $('bnbAmount');
    const maxBNB   = $('maxBNB');
    const buyBNB   = $('buyBNB');

    if(maxBNB) maxBNB.onclick = async ()=>{
      try{
        const bal = await provider.getBalance(acct);
        const buffer = ethers.utils.parseEther("0.0005");
        const spend = bal.gt(buffer)? bal.sub(buffer): ethers.constants.Zero;
        if(bnbInput) bnbInput.value = fmt(spend,18);
        ok('Max BNB filled (minus gas buffer).');
      }catch(e){ er(e.message || 'Failed to read BNB balance'); }
    };

    if(buyBNB) buyBNB.onclick = async ()=>{
      try{
        const val = parseFloatSafe(bnbInput?.value || '0');
        if(!val || val<=0) return er('Enter BNB amount');
        const tx = await presale.buyWithBNB({ value: ethers.utils.parseEther(String(val)) });
        await tx.wait();
        ok('Success: bought with BNB');
        await refreshStats();
      }catch(e){ er(e?.data?.message || e.message || 'BNB transaction failed'); }
    };

    // USDT: buy by USDT amount
    const usdtAmt  = $('usdtAmount');
    const maxUSDT  = $('maxUSDT');
    const buyUSDa  = $('buyUSDT_amount');

    if(maxUSDT) maxUSDT.onclick = async ()=>{
      try{
        const dec = await usdt.decimals(); // USDT on BSC is 18
        const bal = await usdt.balanceOf(acct);
        const human = fmt(bal, dec);
        if(usdtAmt) usdtAmt.value = human;

        // Also prefill ALTRU equivalent
        const usdtWei  = ethers.utils.parseUnits(human, dec);
        const altruWei = usdtWei.mul(RATE);
        const altruEl  = $('altruAmount');
        if(altruEl) altruEl.value = ethers.utils.formatUnits(altruWei, 18);
        ok('Max USDT filled (and ALTRU equivalent).');
      }catch(e){ er(e.message || 'Failed to read USDT balance'); }
    };

    if(buyUSDa) buyUSDa.onclick = async ()=>{
      try{
        const dec = await usdt.decimals();
        const amt = parseFloatSafe(usdtAmt?.value || '0');
        if(!amt || amt<=0) return er('Enter USDT amount');
        const usdtWei = ethers.utils.parseUnits(String(amt), dec);

        const allowance = await usdt.allowance(acct, PRESALE_ADDRESS);
        if(allowance.lt(usdtWei)){
          const txA = await usdt.approve(PRESALE_ADDRESS, usdtWei);
          await txA.wait();
        }
        const tx = await presale.buyWithUSDT(usdtWei);
        await tx.wait();
        ok(`Success: bought with ${amt} USDT`);
        await refreshStats();
      }catch(e){ er(e?.data?.message || e.message || 'USDT transaction failed'); }
    };

    // USDT: buy targeting ALTRU amount
    const altruAmt = $('altruAmount');
    const buyUSDTb = $('buyUSDT_altru');

    if(buyUSDTb) buyUSDTb.onclick = async ()=>{
      try{
        const a = parseFloatSafe(altruAmt?.value || '0');
        if(!a || a<=0) return er('Enter ALTRU amount');

        const altruWei = ethers.utils.parseUnits(String(a), 18);
        const rateBN   = toBN(RATE.toString());
        const usdtWei  = altruWei.add(rateBN.sub(1)).div(rateBN); // ceil

        const allowance = await usdt.allowance(acct, PRESALE_ADDRESS);
        if(allowance.lt(usdtWei)){
          const txA = await usdt.approve(PRESALE_ADDRESS, usdtWei);
          await txA.wait();
        }
        const tx = await presale.buyWithUSDT(usdtWei);
        await tx.wait();
        ok(`Success: bought ${a} ALTRU with USDT`);
        await refreshStats();
      }catch(e){ er(e?.data?.message || e.message || 'USDT transaction failed'); }
    };

  })();
  </script>
</body>
</html>
