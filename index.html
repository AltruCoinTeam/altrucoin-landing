<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="AltruCoin – The Token of Altruism on the Blockchain."/>
  <meta property="og:title" content="AltruCoin"/>
  <meta property="og:description" content="Every transaction supports real-world good."/>
  <meta property="og:image" content="og-image.png"/>
  <link rel="icon" href="favicon.ico"/>
  <title>AltruCoin – Token of Altruism</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QBQVD56HTD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-QBQVD56HTD');
  </script>

  <!-- AOS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css"/>

  <style>
    /* ====== Design System ====== */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

    :root{
      /* dark */
      --primary:#00c2ff;
      --secondary:#7d00ff;

      --bg-0:#0e1224;
      --bg-1:#121735;
      --bg-2:#0b1024;

      --text:#ffffff;
      --text-muted:#cfe4ff;
      --border:rgba(255,255,255,.14);
      --surface-grad:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      --shadow:0 10px 30px rgba(0,0,0,.25);
      --ring:0 0 0 3px rgba(0,194,255,.35);

      --radius:14px;
      --radius-lg:20px;
      --pad:16px;
      --maxw:1180px;
    }

    /* light theme */
    html[data-theme="light"]{
      --bg-0:#f6f8fc;
      --bg-1:#ffffff;
      --bg-2:#f0f4ff;

      --text:#0b1226;
      --text-muted:#374151;
      --border:rgba(0,0,0,.12);
      --surface-grad:linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,.01));
      --shadow:0 10px 30px rgba(16,24,40,.08);
      --ring:0 0 0 3px rgba(0,194,255,.35);
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',sans-serif;
      background:
        radial-gradient(1200px 600px at 85% -10%, rgba(125,0,255,.20), transparent 60%),
        radial-gradient(900px 500px at -10% 10%, rgba(0,194,255,.16), transparent 60%),
        var(--bg-0);
      color:var(--text);
      line-height:1.55;
    }
    html[data-theme="light"] body{
      background:
        radial-gradient(1100px 560px at 85% -10%, rgba(125,0,255,.10), transparent 60%),
        radial-gradient(820px 480px at -10% 10%, rgba(0,194,255,.10), transparent 60%),
        var(--bg-0);
    }

    a{color:var(--primary);text-decoration:none}
    a:hover{text-decoration:underline}
    :focus-visible{outline:none;box-shadow:var(--ring);border-radius:12px}

    /* ====== Layout ====== */
    .container{max-width:var(--maxw);margin:0 auto;padding:0 20px}
    section{padding:68px 0;scroll-margin-top:84px}
    .section-header{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:16px;gap:12px}
    h1,h2,h3{letter-spacing:.2px}
    h1{font-size:clamp(2rem,4vw,3.25rem);line-height:1.1}
    h2{font-size:clamp(1.5rem,2.4vw,2rem)}
    h3{font-size:1.12rem}

    /* ====== Header ====== */
    header{
      position:sticky;top:0;z-index:50;
      backdrop-filter:saturate(160%) blur(10px);
      background:linear-gradient(to right, color-mix(in oklab, var(--bg-0) 85%, transparent), color-mix(in oklab, var(--bg-1) 85%, transparent));
      border-bottom:1px solid var(--border);
    }
    .nav{height:64px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .brand-badge{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--primary),var(--secondary));box-shadow:0 6px 18px rgba(0,194,255,.25), inset 0 0 20px rgba(255,255,255,.15)}
    .menu{display:flex;gap:8px;flex-wrap:wrap}
    .menu a{color:var(--text);opacity:.85;text-decoration:none;font-weight:600;padding:8px 10px;border-radius:10px}
    .menu a:hover,.menu a.active{background:color-mix(in oklab, var(--border) 30%, transparent)}
    .controls{display:flex;align-items:center;gap:8px}

    /* burger */
    .burger{display:none; width:40px;height:40px;border:1px solid var(--border);border-radius:12px;background:transparent;cursor:pointer}
    .burger span{display:block;width:22px;height:2px;background:var(--text);margin:5px auto;border-radius:1px}

    /* mobile menu */
    .drawer{display:none}
    .drawer.open{display:block}
    .drawer .menu{flex-direction:column;align-items:flex-start;padding:10px 0}
    .drawer a{padding:10px 12px;width:100%}

    /* ====== Hero ====== */
    .hero{
      padding:70px 0 44px;
      background:
        linear-gradient(135deg, color-mix(in oklab, var(--primary) 18%, transparent), color-mix(in oklab, var(--secondary) 12%, transparent)),
        linear-gradient(180deg, color-mix(in oklab, var(--text) 8%, transparent), transparent 40%);
      border-bottom:1px solid var(--border);
    }
    .hero-wrap{display:grid;grid-template-columns:1.15fr .85fr;gap:28px;align-items:center}
    .hero-card{
      background:var(--surface-grad);
      border:1px solid var(--border);border-radius:var(--radius-lg);
      padding:22px;box-shadow:var(--shadow)
    }
    .hero-actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:8px 12px;border:1px solid var(--border);border-radius:999px;
      background:color-mix(in oklab, var(--bg-2) 80%, transparent);color:var(--text-muted);font-size:.9rem
    }
    .price-pill{font-weight:700}

    .cta{
      display:inline-flex;align-items:center;gap:10px;
      padding:12px 16px;border-radius:12px;font-weight:700;text-decoration:none;border:1px solid var(--border)
    }
    .cta.primary{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#00111a;border:0}
    .cta.ghost{background:transparent;color:var(--text)}

    /* ====== Cards / Grids ====== */
    .card{background:var(--bg-1);border:1px solid var(--border);border-radius:var(--radius);padding:var(--pad);box-shadow:var(--shadow)}
    html[data-theme="light"] .card{background:var(--bg-1)}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
    .stack-16{display:grid;gap:16px}
    .muted{color:var(--text-muted);opacity:.95}

    /* ====== Tokenomics ====== */
    .tokenomics{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:12px}
    .tokenomics .cell{text-align:center;padding:18px;border-radius:14px;background:var(--surface-grad);border:1px solid var(--border)}
    .big-num{font-size:1.6rem;font-weight:700}

    /* ====== Forms & Buttons ====== */
    input{
      padding:12px;border:1px solid var(--border);border-radius:12px;background:var(--bg-2);color:var(--text);min-width:150px
    }
    input::placeholder{color:#94a3b8}
    button{padding:12px 14px;border:0;border-radius:12px;background:var(--primary);color:#00111a;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;color:var(--text);border:1px solid var(--border)}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

    /* ====== Liquidity ====== */
    .lock{background:linear-gradient(180deg,color-mix(in oklab,var(--primary) 12%, transparent), color-mix(in oklab, var(--text) 2%, transparent));border:1px solid var(--border);border-left:4px solid var(--primary);border-radius:var(--radius);padding:18px}

    /* ====== FAQ ====== */
    .faq ul{display:grid;gap:12px}
    .faq li{list-style:none}
    .faq .q{display:block;width:100%;text-align:left;background:transparent;border:1px solid var(--border);color:var(--text);padding:14px;border-radius:12px;font-weight:600}
    .faq .a{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;margin-top:8px;background:color-mix(in oklab, var(--bg-2) 80%, transparent)}

    /* ====== Footer ====== */
    footer{margin-top:64px;padding:28px 0;border-top:1px solid var(--border);background:linear-gradient(180deg, color-mix(in oklab, var(--text) 2%, transparent), transparent)}

    /* ====== Utilities ====== */
    .addr{font-family:ui-monospace,Menlo,Consolas;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:320px}
    .center{text-align:center}
    .nowrap{white-space:nowrap}

    /* ====== Toasts ====== */
    .toasts{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:10px;z-index:100}
    .toast{min-width:260px;max-width:94vw;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:var(--bg-1);box-shadow:var(--shadow);display:flex;gap:10px;align-items:flex-start}
    .toast.success{border-color:rgba(34,197,94,.35)}
    .toast.error{border-color:rgba(239,68,68,.35)}
    .toast .title{font-weight:700;margin-right:6px}
    .toast .close{margin-left:auto;background:transparent;border:0;cursor:pointer;color:var(--text)}

    /* ====== Network Warning Banner ====== */
    .net-warn{
      display:none;
      background:linear-gradient(180deg, rgba(239,68,68,.12), rgba(239,68,68,.04));
      border:1px solid rgba(239,68,68,.35);
      color:#fff;
      padding:14px;
      border-radius:12px;
      margin:14px 0;
    }
    html[data-theme="light"] .net-warn{color:#7a0e0e}

    /* ====== Last Purchases ====== */
    .activity-table{width:100%;border-collapse:separate;border-spacing:0 8px}
    .activity-table th{font-weight:700;text-align:left;font-size:.92rem;color:var(--text-muted)}
    .activity-row{
      background:var(--bg-1);
      border:1px solid var(--border);
      border-radius:12px;
      overflow:hidden;
    }
    .activity-row td{padding:10px 12px}
    .tag{display:inline-block;padding:4px 8px;border:1px solid var(--border);border-radius:999px;font-size:.82rem}

    /* ====== Responsive ====== */
    @media (max-width: 980px){
      .menu{display:none}
      .burger{display:inline-block}
      .hero-wrap{grid-template-columns:1fr}
      .tokenomics{grid-template-columns:repeat(2,1fr)}
      .grid-3{grid-template-columns:1fr}
      .grid-2{grid-template-columns:1fr}
    }
    @media (prefers-reduced-motion: reduce){
      *{animation:none !important;transition:none !important}
    }
  </style>
</head>
<body>
  <!-- ====== Header / Nav ====== -->
  <header>
    <div class="container nav">
      <div class="brand">
        <span class="brand-badge" aria-hidden="true"></span>
        <span>AltruCoin</span>
      </div>

      <nav class="menu" id="topMenu">
        <a href="#about">About</a>
        <a href="#tokenomics">Tokenomics</a>
        <a href="#buy">Buy</a>
        <a href="#chart">Chart</a>
        <a href="#roadmap">Roadmap</a>
        <a href="#community">Community</a>
        <a href="audit.html">Transparency</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="controls">
        <button class="burger" id="burger" aria-label="Menu" aria-expanded="false" aria-controls="drawer">
          <span></span><span></span><span></span>
        </button>
        <button id="themeToggle" class="cta ghost" aria-label="Toggle theme">🌓 Theme</button>
      </div>
    </div>
    <div class="container drawer" id="drawer">
      <nav class="menu">
        <a href="#about">About</a>
        <a href="#tokenomics">Tokenomics</a>
        <a href="#buy">Buy</a>
        <a href="#chart">Chart</a>
        <a href="#roadmap">Roadmap</a>
        <a href="#community">Community</a>
        <a href="audit.html">Transparency</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <!-- ====== Hero ====== -->
  <section class="hero" data-aos="fade-up">
    <div class="container hero-wrap">
      <div>
        <h1>The Web3 Token of Altruism</h1>
        <p class="muted" style="max-width:640px;margin-top:10px">
          Every transaction helps real people, animals, and the planet — transparently and on-chain.
        </p>
        <div class="hero-actions">
          <a class="cta primary" href="#buy">Buy $ALTRU</a>
          <a class="cta ghost" href="Whitepaper.pdf" target="_blank">📄 Whitepaper</a>
          <span class="pill price-pill">ALTRU: <span id="altruPrice">—</span></span>
        </div>
      </div>
      <div class="hero-card">
        <!-- Network warning banner -->
        <div id="netWarning" class="net-warn">
          ⚠️ You are connected to <b><span id="wrongNetName">Unknown</span></b>. Please switch to <b>BNB Smart Chain (BSC)</b>.
          <div class="row" style="margin-top:8px">
            <button id="switchToBsc">🔁 Switch to BSC</button>
          </div>
        </div>

        <div class="row" style="margin-bottom:10px">
          <span class="pill"><strong>Network:</strong> <span id="netName" class="nowrap">&nbsp;—&nbsp;</span> (<span id="chainId">—</span>)</span>
          <span class="pill"><strong>Account:</strong> <span id="account" class="addr">—</span></span>
        </div>
        <div class="grid-3">
          <div class="card">
            <div class="muted">Contract (Presale)</div>
            <div id="contractAddr" class="addr" style="margin-top:6px">—</div>
          </div>
          <div class="card">
            <div class="muted">BNB → USD (oracle)</div>
            <div id="bnbUsd" style="margin-top:6px">—</div>
          </div>
          <div class="card">
            <div class="muted">Rate</div>
            <div id="rateUSDT" class="big-num" style="margin-top:6px">—</div>
            <div class="muted" style="font-size:.9rem">ALTRU / 1 USDT</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ====== About ====== -->
  <section id="about" data-aos="fade-up">
    <div class="container">
      <div class="section-header">
        <h2>About</h2>
      </div>
      <div class="grid-2">
        <div class="card">
          <p>AltruCoin is a Web3-powered cryptocurrency with a mission: to turn market activity into meaningful charitable impact. Every time someone trades the token, a fee is collected and distributed monthly:</p>
          <ul style="margin-top:10px;padding-left:1.1rem">
            <li><strong>50%</strong> — to verified charities (in USDT)</li>
            <li><strong>25%</strong> — for development & audits</li>
            <li><strong>25%</strong> — for token buybacks</li>
          </ul>
          <p style="margin-top:10px">Built on BNB Smart Chain for low fees and speed. Token holders drive the mission through DAO voting. Upcoming: UAE foundation registration & AltruScan dashboard.</p>
          <div style="margin-top:14px">
            <a class="cta ghost" href="Whitepaper.pdf" target="_blank">📄 View Whitepaper (PDF)</a>
          </div>
        </div>
        <div class="card">
          <h3>Quick Facts</h3>
          <div class="stack-16" style="margin-top:10px">
            <div class="row"><span class="pill">Fast & low fees</span><span class="pill">Transparent</span><span class="pill">Deflationary</span></div>
            <div class="row"><span class="pill">DAO-ready</span><span class="pill">On-chain impact</span></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ====== Tokenomics ====== -->
  <section id="tokenomics" data-aos="fade-up">
    <div class="container">
      <div class="section-header">
        <h2>Tokenomics</h2>
      </div>

      <p class="muted">All trading fee revenue is distributed monthly:</p>
      <div class="tokenomics">
        <div class="cell"><div class="big-num">50%</div>Charity (USDT)</div>
        <div class="cell"><div class="big-num">25%</div>Project & Dev</div>
        <div class="cell"><div class="big-num">25%</div>Token Buyback</div>
        <div class="cell">
          <div class="muted">Status</div>
          <div style="display:flex;gap:14px;justify-content:center;margin-top:6px">
            <span class="pill">Sold: <span id="sold">—</span></span>
            <span class="pill">Cap: <span id="cap">—</span></span>
            <span class="pill">In contract: <span id="balance">—</span></span>
          </div>
        </div>
      </div>

      <p style="margin-top:18px" class="muted">Token allocation:</p>
      <div class="tokenomics">
        <div class="cell"><div class="big-num">20%</div>Private Sale</div>
        <div class="cell"><div class="big-num">30%</div>Public Launch</div>
        <div class="cell"><div class="big-num">10%</div>Team (vested)</div>
        <div class="cell"><div class="big-num">40%</div>Reserve & Ecosystem</div>
      </div>
    </div>
  </section>

  <!-- ====== Buy ====== -->
  <section id="buy" data-aos="fade-up">
    <div class="container">
      <div class="section-header">
        <h2>Buy $ALTRU</h2>
        <a class="cta ghost" href="https://pancakeswap.finance/swap?outputCurrency=0x24f3F00A8e6E8a37490b2244C7705a7A005dDb4E" target="_blank">🔥 Buy on PancakeSwap</a>
      </div>

      <div class="grid-2">
        <div class="card">
          <h3>Buy with BNB</h3>
          <div class="row" style="margin-top:10px">
            <input id="bnbAmount" type="number" step="0.000001" placeholder="BNB amount"/>
            <button id="maxBNB" class="ghost">Max BNB</button>
            <button id="buyBNB">Buy</button>
          </div>
          <div class="muted" style="margin-top:8px">Send BNB; tokens are calculated on-chain via Chainlink BNB/USD × rate.</div>
        </div>

        <div class="card">
          <h3>Buy with USDT</h3>
          <div class="row" style="margin-top:10px">
            <input id="usdtAmount" type="number" step="0.01" placeholder="USDT amount"/>
            <button id="maxUSDT" class="ghost">Max USDT</button>
            <button id="buyUSDT_amount">Buy (USDT)</button>
          </div>
          <div class="muted" style="margin:10px 0 6px">Or target an ALTRU amount (auto-computes USDT):</div>
          <div class="row">
            <input id="altruAmount" type="number" step="100000" value="100000" min="100000" placeholder="ALTRU amount"/>
            <button id="buyUSDT_altru">Buy (ALTRU)</button>
          </div>
          <div class="muted" style="margin-top:8px">We auto-approve if allowance is insufficient.</div>
        </div>
      </div>

      <p id="status" class="muted" style="margin-top:10px;"></p>
    </div>
  </section>

  <!-- ====== Chart ====== -->
  <section id="chart" data-aos="fade-up">
    <div class="container">
      <div class="section-header">
        <h2>Live Price Chart</h2>
      </div>
      <div class="card">
        <iframe
          src="https://dexscreener.com/bsc/0x5a59F6581EF65099bE92B491c9B36B4a66727707?embed=1&theme=dark"
          width="100%" height="520" style="border:0;border-radius:12px" allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <!-- ====== Roadmap ====== -->
  <section id="roadmap" data-aos="fade-up">
    <div class="container">
      <div class="section-header"><h2>Roadmap</h2></div>
      <div class="grid-3">
        <div class="card"><strong>✅ Token deployment</strong><br><span class="muted">Contract live & verified</span></div>
        <div class="card"><strong>🚀 PancakeSwap listing</strong><br><span class="muted">Liquidity & trading</span></div>
        <div class="card"><strong>🗳 DAO governance</strong><br><span class="muted">Community-driven votes</span></div>
        <div class="card"><strong>📊 Charity dashboard</strong><br><span class="muted">AltruScan transparency</span></div>
        <div class="card"><strong>🏛 UAE foundation</strong><br><span class="muted">Legal structure</span></div>
      </div>
    </div>
  </section>

  <!-- ====== Liquidity Locked ====== -->
  <section data-aos="fade-up">
    <div class="container">
      <div class="lock">
        <h3 style="margin-bottom:8px; color: var(--primary)">🔒 Liquidity Locked</h3>
        <p class="muted">To ensure long-term trust and prevent rug pulls, the ALTRU/BNB liquidity on PancakeSwap has been locked via PinkLock.</p>
        <a href="https://www.pinksale.finance/pinklock/bsc/record/1340541" target="_blank" class="cta" style="margin-top:12px;display:inline-flex">🔐 View Lock on PinkSale</a>
      </div>
    </div>
  </section>

  <!-- ====== Community ====== -->
  <section id="community" data-aos="fade-up">
    <div class="container">
      <div class="section-header"><h2>Community</h2></div>
      <p>Join our growing movement and connect with others who believe in blockchain-powered altruism.</p>
      <div class="row center" style="justify-content:center;margin:16px 0 28px">
        <a class="cta" href="https://t.me/AltrucoinGroup" target="_blank">📢 Telegram Channel</a>
        <a class="cta" href="https://t.me/AltrucoinChat" target="_blank">💬 Telegram Chat</a>
        <button onclick="addToken()" class="cta primary">🦊 Add $ALTRU to MetaMask</button>
      </div>
    </div>
  </section>

  <!-- ====== Last Purchases ====== -->
  <section id="activity" data-aos="fade-up">
    <div class="container">
      <div class="section-header"><h2>Last purchases</h2></div>
      <div class="card">
        <div class="muted" style="margin-bottom:10px">Live updates (latest 5)</div>
        <div class="stack-16" id="lastPurchases">
          <!-- rows injected here -->
        </div>
      </div>
    </div>
  </section>

  <!-- ====== FAQ ====== -->
  <section id="faq" data-aos="fade-up" class="faq">
    <div class="container">
      <div class="section-header"><h2>FAQ</h2></div>
    <ul>
      <li>
        <button class="q" onclick="toggleFaq(this)">What is AltruCoin?</button>
        <div class="a" hidden>A crypto token on BNB Smart Chain where every trade supports real charitable causes.</div>
      </li>
      <li>
        <button class="q" onclick="toggleFaq(this)">How are transaction fees used?</button>
        <div class="a" hidden>5% fee breakdown:<br>– 2.5% to charities (in USDT)<br>– 2% to development & liquidity<br>– 0.5% auto-burn</div>
      </li>
      <li>
        <button class="q" onclick="toggleFaq(this)">Is the token safe?</button>
        <div class="a" hidden>Yes — contract is open-source, verifiable, audited soon.</div>
      </li>
      <li>
        <button class="q" onclick="toggleFaq(this)">How to add ALTRU?</button>
        <div class="a" hidden>Use the 🦊 Add to MetaMask button in the Community section.</div>
      </li>
    </ul>
    </div>
  </section>

  <!-- ====== Contact / Donate ====== -->
  <section id="contact" data-aos="fade-up">
    <div class="container">
      <div class="section-header"><h2>Contact</h2></div>
      <p>📩 For support, partnerships, or media inquiries — reach out to us:</p>
      <div class="center" style="margin-top:12px">
        <a href="mailto:support@altrucoin.org" class="cta">support@altrucoin.org</a>
      </div>

      <div class="card" style="margin-top:24px">
        <h3>❤️ Support / Donate</h3>
        <p style="word-break:break-all; font-size:1rem;margin-top:6px">0x7c76AA8d29F1F075846ED04446197f4fda047c4d</p>
        <button class="cta" style="margin-top:8px" onclick="navigator.clipboard.writeText('0x7c76AA8d29F1F075846ED04446197f4fda047c4d')">📋 Copy Address</button>
        <div style="margin-top:14px">
          <img src="donation-qr.png" alt="Donation QR" style="max-width:180px;border-radius:12px;border:1px solid var(--border)" />
          <p class="muted" style="font-size:.9rem;margin-top:6px">Scan via MetaMask / Trust Wallet</p>
        </div>
        <p class="muted" style="margin-top:12px">
          You can send USDT (BEP-20), BNB or any supported BEP-20 token.<br/>
          Always verify the network and address before sending.
        </p>
        <p style="margin-top:6px">
          <a href="https://bscscan.com/address/0x7c76AA8d29F1F075846ED04446197f4fda047c4d" target="_blank">🔍 View on BscScan</a>
        </p>
      </div>
    </div>
  </section>

  <footer>
    <div class="container center">
      &copy; 2025 AltruCoin — Built with purpose. Powered by people.<br/>
      📩 <a href="mailto:support@altrucoin.org">support@altrucoin.org</a> • ❤️ 0x7c76AA8d29F1F075846ED04446197f4fda047c4d
    </div>
  </footer>

  <!-- ====== Toasts container ====== -->
  <div class="toasts" id="toasts" aria-live="polite" aria-atomic="true"></div>

  <!-- ====== Scripts ====== -->
  <script>
    // ---- Theme (auto + manual) ----
    const root = document.documentElement;
    const THEME_KEY = 'altru-theme';
    function applyTheme(mode){ // 'light' | 'dark' | 'auto'
      root.setAttribute('data-theme', mode);
      localStorage.setItem(THEME_KEY, mode);
      if(mode==='auto'){
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        root.setAttribute('data-theme', prefersDark?'dark':'light');
      }
    }
    (function initTheme(){
      const saved = localStorage.getItem(THEME_KEY) || 'auto';
      applyTheme(saved);
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
        if(localStorage.getItem(THEME_KEY)==='auto') applyTheme('auto');
      });
      document.getElementById('themeToggle')?.addEventListener('click', ()=>{
        const cur = document.documentElement.getAttribute('data-theme');
        const next = cur==='dark' ? 'light' : 'dark';
        applyTheme(next);
      });
    })();

    // ---- Mobile drawer ----
    const burger = document.getElementById('burger');
    const drawer = document.getElementById('drawer');
    burger?.addEventListener('click', ()=>{
      const open = drawer.classList.toggle('open');
      burger.setAttribute('aria-expanded', open?'true':'false');
    });

    // ---- Active menu on scroll ----
    const links = [...document.querySelectorAll('#topMenu a, #drawer a')];
    const targets = [...new Set(links.map(a => a.getAttribute('href')).filter(Boolean))]
      .map(sel => document.querySelector(sel));
    function setActive(){
      const y = window.scrollY + 120;
      let idx = 0;
      targets.forEach((sec,i)=>{ if(sec && sec.offsetTop <= y) idx = i;});
      document.querySelectorAll('#topMenu a').forEach((a,i)=>a.classList.toggle('active', i===idx));
    }
    window.addEventListener('scroll', setActive, {passive:true});
    setActive();

    // ---- FAQ toggle ----
    function toggleFaq(btn){
      const ans = btn.nextElementSibling;
      const isHidden = ans.hasAttribute('hidden');
      document.querySelectorAll('.faq .a').forEach(a=>a.setAttribute('hidden',''));
      if(isHidden) ans.removeAttribute('hidden');
      setTimeout(()=>ans.scrollIntoView({behavior:'smooth',block:'start'}),100);
    }
    window.toggleFaq = toggleFaq;

    // ---- Toasts ----
    function showToast(message, type='info', title=''){
      const wrap = document.getElementById('toasts');
      const t = document.createElement('div');
      t.className = `toast ${type}`;
      t.innerHTML = `
        <div>
          ${title?`<div class="title">${title}</div>`:''}
          <div>${message}</div>
        </div>
        <button class="close" aria-label="Close">✕</button>
      `;
      wrap.appendChild(t);
      const closer = t.querySelector('.close');
      const timer = setTimeout(()=>{ t.remove(); }, 4500);
      closer.onclick = ()=>{ clearTimeout(timer); t.remove(); };
    }

    // ---- Number animation ----
    function animateNumber(el, target, opts={}){
      if(!el) return;
      const {duration=700, format=(n)=>n.toLocaleString('en-US')} = opts;
      const start = Number(el.dataset.value || 0);
      const end = Number(target);
      const diff = end - start;
      const t0 = performance.now();
      function step(t){
        const k = Math.min(1, (t - t0)/duration);
        const eased = 1 - Math.pow(1-k, 3);
        const val = start + diff*eased;
        el.textContent = format(val);
        if(k<1) requestAnimationFrame(step); else el.dataset.value = String(end);
      }
      requestAnimationFrame(step);
    }
  </script>

  <script>
    async function addToken() {
      try {
        const wasAdded = await window.ethereum.request({
          method: 'wallet_watchAsset',
          params: {
            type: 'ERC20',
            options: {
              address: '0x24f3F00A8e6E8a37490b2244C7705a7A005dDb4E',
              symbol: 'ALTRU',
              decimals: 18,
              image: 'https://altrucoin.org/favicon.ico'
            }
          }
        });
        if (wasAdded) showToast('Token added to MetaMask.', 'success', 'MetaMask');
        else showToast('User cancelled token add.', 'error', 'MetaMask');
      } catch (error) {
        console.error(error);
        showToast(error?.message || 'Failed to add token.', 'error', 'MetaMask');
      }
    }
    window.addToken = addToken;
  </script>

  <!-- AOS script -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>AOS.init();</script>

  <!-- Dexscreener price fetch (hero price pill) -->
  <script>
    async function fetchAltruPrice() {
      try {
        const res = await fetch("https://api.dexscreener.com/latest/dex/pairs/bsc/0x5a59F6581EF65099bE92B491c9B36B4a66727707");
        const data = await res.json();
        const price = parseFloat(data.pair.priceUsd);
        const el = document.getElementById("altruPrice");
        if (el) el.textContent = `$${price.toFixed(8)}`;
      } catch (e) {
        console.error("Error fetching ALTRU price:", e);
      }
    }
    fetchAltruPrice();
    setInterval(fetchAltruPrice, 15000);
  </script>

 <!-- ethers.js + widget logic -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script>
(async function(){
  // ====== Addresses ======
  const PRESALE_ADDRESS = "0x4D3F586Dc66f41a05d36F960121E2C7F1a5Ab64c";
  const ALTRU_ADDRESS   = "0x24f3F00A8e6E8a37490b2244C7705a7A005dDb4E";
  const USDT_ADDRESS    = "0x55d398326f99059fF775485246999027B3197955";
  const FEED_ADDRESS    = "0x0567F2323251f0Aab15c8dFb1967E4e8A7D42aeE"; // Chainlink BNB/USD

  // ====== ABIs ======
  const PRESALE_ABI = [
    "event BoughtWithBNB(address indexed buyer, uint256 usdtWei, uint256 amountALTRU, uint256 paidBNB)",
    "event BoughtWithUSDT(address indexed buyer, uint256 usdtWei, uint256 amountALTRU)",
    "function rateUSDT() view returns (uint256)",
    "function hardCapTokens() view returns (uint256)",
    "function soldTokens() view returns (uint256)",
    "function paused() view returns (bool)",
    "function buyWithBNB() payable",
    "function buyWithUSDT(uint256 usdtWei)"
  ];
  const ERC20_ABI = [
    "function balanceOf(address) view returns (uint256)",
    "function approve(address spender, uint256 amount) returns (bool)",
    "function allowance(address owner, address spender) view returns (uint256)",
    "function decimals() view returns (uint8)"
  ];
  const FEED_ABI = [
    "function latestRoundData() view returns (uint80,int256,uint256,uint256,uint80)",
    "function decimals() view returns (uint8)"
  ];

  // ====== DOM helpers ======
  const $  = id => document.getElementById(id);
  const statusEl = $('status');
  const setOk = (m)=>{ if(statusEl){ statusEl.style.color='#6aff9f'; statusEl.textContent=m; } };
  const setEr = (m)=>{ if(statusEl){ statusEl.style.color='crimson'; statusEl.textContent=m; } };
  const nf = (n, max=0)=> (Number(n)||0).toLocaleString('en-US',{maximumFractionDigits:max});

  // ====== Provider: robust read RPC (race with timeout) ======
  const READ_RPCS = [
    "https://bsc-dataseed.binance.org",
    "https://rpc.ankr.com/bsc",
    "https://bscrpc.com"
  ];
  function timeout(ms){ return new Promise((_,rej)=>setTimeout(()=>rej(new Error('RPC timeout')),ms)); }
  async function makeReadProvider(){
    // Race the first RPC that responds to getBlockNumber within 3s
    for(const url of READ_RPCS){
      try{
        const p = new ethers.providers.JsonRpcProvider(url, { name: 'bsc', chainId: 56 });
        await Promise.race([p.getBlockNumber(), timeout(3000)]);
        return p;
      }catch{ /* try next */ }
    }
    // fallback to the first anyway
    return new ethers.providers.JsonRpcProvider(READ_RPCS[0], { name: 'bsc', chainId: 56 });
  }
  const readProvider = await makeReadProvider();

  // Wallet provider (optional; only if user has MetaMask/etc.)
  let walletProvider = null, signer = null, acct = null, net = null;
  if(window.ethereum){
    walletProvider = new ethers.providers.Web3Provider(window.ethereum, 'any'); // 'any' to survive network switch
    try{
      await walletProvider.send('eth_requestAccounts', []);
      signer = walletProvider.getSigner();
      acct   = await signer.getAddress();
      net    = await walletProvider.getNetwork();
    }catch{ /* user might cancel connect */ }
  }

  // ====== Contracts (read + write) ======
  const presaleRead = new ethers.Contract(PRESALE_ADDRESS, PRESALE_ABI, readProvider);
  const altruRead   = new ethers.Contract(ALTRU_ADDRESS,   ERC20_ABI,   readProvider);
  const feedRead    = new ethers.Contract(FEED_ADDRESS,    FEED_ABI,    readProvider);
  const presale     = signer ? new ethers.Contract(PRESALE_ADDRESS, PRESALE_ABI, signer) : null;
  const usdt        = signer ? new ethers.Contract(USDT_ADDRESS,    ERC20_ABI,   signer) : null;

  // ====== Header indicators + network warning ======
  if($('contractAddr')) $('contractAddr').textContent = PRESALE_ADDRESS;
  if(acct) $('account') && ( $('account').textContent = acct );
  if(net){
    const chainIdDec = Number(net.chainId);
    const isBsc = chainIdDec === 56;
    if($('netName'))  $('netName').textContent = net.name || (isBsc?'BSC':'Unknown');
    if($('chainId'))  $('chainId').textContent = chainIdDec;
    if(!isBsc && $('netWarning')){
      $('wrongNetName').textContent = net.name || `Chain ${chainIdDec}`;
      $('netWarning').style.display = 'block';
    }
  }
  $('switchToBsc')?.addEventListener('click', async ()=>{
    try{
      await window.ethereum.request({ method:'wallet_switchEthereumChain', params:[{ chainId:'0x38' }] });
      location.reload();
    }catch(e){
      if(e?.code===4902){
        try{
          await window.ethereum.request({
            method:'wallet_addEthereumChain',
            params:[{
              chainId:'0x38',
              chainName:'BNB Smart Chain',
              nativeCurrency:{ name:'BNB', symbol:'BNB', decimals:18 },
              rpcUrls:READ_RPCS,
              blockExplorerUrls:['https://bscscan.com']
            }]
          });
          await window.ethereum.request({ method:'wallet_switchEthereumChain', params:[{ chainId:'0x38' }] });
          location.reload();
        }catch(e2){ setEr(e2?.message||'Failed to add/switch BSC'); }
      }else{
        setEr(e?.message||'Failed to switch network');
      }
    }
  });

  // ====== Dynamic decimals ======
  // IMPORTANT: we fetch token decimals once to format balances correctly
  let altruDecimals = 18;
  try { altruDecimals = await altruRead.decimals(); } catch{ altruDecimals = 18; }

  // ====== Rate & Stats ======
  let RATE = ethers.BigNumber.from(0);
  async function refreshStats(){
    try{
      const [rate, cap, sold, bal, rd, dec] = await Promise.all([
        presaleRead.rateUSDT(),
        presaleRead.hardCapTokens(),
        presaleRead.soldTokens(),
        altruRead.balanceOf(PRESALE_ADDRESS),
        feedRead.latestRoundData(),
        feedRead.decimals()
      ]);
      RATE = rate;

      const capN  = Number(ethers.utils.formatUnits(cap,  altruDecimals));
      const soldN = Number(ethers.utils.formatUnits(sold, altruDecimals));
      const balN  = Number(ethers.utils.formatUnits(bal,  altruDecimals));

      $('rateUSDT') && animateNumber($('rateUSDT'), Number(RATE.toString()), {format:(x)=>nf(x,0)});
      $('cap')      && animateNumber($('cap'),  capN,  {format:(x)=>nf(x,0)});
      $('sold')     && animateNumber($('sold'), soldN, {format:(x)=>nf(x,0)});
      $('balance')  && animateNumber($('balance'), balN, {format:(x)=>nf(x,0)});

      const bnbUsd = Number(rd[1]) / (10 ** Number(dec));
      $('bnbUsd') && ( $('bnbUsd').textContent = `$${bnbUsd.toLocaleString('en-US',{maximumFractionDigits:2})} / BNB` );
    }catch(e){
      console.warn('refresh failed', e);
      setEr('Failed to load on-chain stats. Retrying…');
    }
  }
  await refreshStats();
  readProvider.on('block', (n)=>{ if(n%6===0) refreshStats(); });

  // ====== Last Purchases ======
  const activityEl = $('lastPurchases');
  const activity = [];
  const addrShort = a => a ? (a.slice(0,6)+'…'+a.slice(-4)) : '—';
  const tsFmt = ts => { try{ const d=new Date(ts); return d.toLocaleString([], {hour:'2-digit',minute:'2-digit',day:'2-digit',month:'short'});}catch{return '—'} };

  function renderActivity(){
    if(!activityEl) return;
    activityEl.innerHTML = '';
    if(activity.length===0){
      const empty = document.createElement('div');
      empty.className = 'muted';
      empty.textContent = 'No purchases yet.';
      activityEl.appendChild(empty);
      return;
    }
    activity.slice(0,5).forEach(item=>{
      const row = document.createElement('div');
      row.className = 'activity-row';
      row.innerHTML = `
        <table class="activity-table"><tbody>
          <tr>
            <td style="width:16ch"><span class="muted">${tsFmt(item.time)}</span></td>
            <td style="width:18ch"><span class="tag">${item.kind}</span></td>
            <td style="min-width:20ch"><span class="addr">${addrShort(item.buyer)}</span></td>
            <td><strong>${nf(item.altru, 0)}</strong> ALTRU</td>
            <td class="muted">${item.kind==='BNB' ? `${item.bnb} BNB` : `${item.usdt} USDT`}</td>
          </tr>
        </tbody></table>
      `;
      activityEl.appendChild(row);
    });
  }

  // Seed last events (~50k blocks)
  try{
    const tip = await readProvider.getBlockNumber();
    const from = Math.max(1, tip - 50000);
    const e1 = await presaleRead.queryFilter(presaleRead.filters.BoughtWithBNB(), from, tip);
    const e2 = await presaleRead.queryFilter(presaleRead.filters.BoughtWithUSDT(), from, tip);

    const merged = e1.concat(e2).sort((a,b)=> b.blockNumber - a.blockNumber).slice(0,5);
    for(const ev of merged){
      const blk = await readProvider.getBlock(ev.blockNumber);
      const when = (blk.timestamp||0)*1000;
      if(ev.event==='BoughtWithBNB'){
        const [buyer, usdtWei, amountALTRU, paidBNB] = ev.args;
        activity.push({
          kind:'BNB', time:when, buyer:String(buyer),
          altru: +ethers.utils.formatUnits(amountALTRU, altruDecimals),
          bnb:   (+ethers.utils.formatUnits(paidBNB, 18)).toFixed(5)
        });
      }else{
        const [buyer, usdtWei, amountALTRU] = ev.args;
        activity.push({
          kind:'USDT', time:when, buyer:String(buyer),
          altru: +ethers.utils.formatUnits(amountALTRU, altruDecimals),
          usdt:  (+ethers.utils.formatUnits(usdtWei, 18)).toFixed(2)
        });
      }
    }
    renderActivity();
  }catch(e){ console.warn('seed activity failed', e); }

  // Live updates (only if wallet connected to speed up block fetch)
  if(walletProvider && presale){
    try{
      presale.on('BoughtWithBNB', async (buyer, usdtWei, amountALTRU, paidBNB, ev)=>{
        const blk=await walletProvider.getBlock(ev.blockNumber);
        activity.unshift({
          kind:'BNB', time:(blk.timestamp||0)*1000, buyer:String(buyer),
          altru:+ethers.utils.formatUnits(amountALTRU, altruDecimals),
          bnb:(+ethers.utils.formatUnits(paidBNB,18)).toFixed(5)
        });
        renderActivity(); await refreshStats();
      });
      presale.on('BoughtWithUSDT', async (buyer, usdtWei, amountALTRU, ev)=>{
        const blk=await walletProvider.getBlock(ev.blockNumber);
        activity.unshift({
          kind:'USDT', time:(blk.timestamp||0)*1000, buyer:String(buyer),
          altru:+ethers.utils.formatUnits(amountALTRU, altruDecimals),
          usdt:(+ethers.utils.formatUnits(usdtWei,18)).toFixed(2)
        });
        renderActivity(); await refreshStats();
      });
    }catch(e){ console.warn('event attach failed', e); }
  }

  // Wallet changes → reload
  if(window.ethereum){
    window.ethereum.on('accountsChanged', ()=>location.reload());
    window.ethereum.on('chainChanged',   ()=>location.reload());
  }

  // ====== BUY: helpers ======
  const parseFloatSafe = (v)=>{ const n = Number(v); return isFinite(n)?n:0; };

  // Safer max BNB: subtract gas buffer so user keeps dust for future txs
  $('maxBNB')?.addEventListener('click', async ()=>{
    if(!walletProvider||!signer) return setEr('Connect wallet to use this.');
    try{
      const bal = await walletProvider.getBalance(await signer.getAddress());
      const buffer = ethers.utils.parseEther("0.0007"); // slightly higher buffer
      const spend = bal.gt(buffer)? bal.sub(buffer): ethers.constants.Zero;
      $('bnbAmount').value = ethers.utils.formatEther(spend);
      setOk('Max BNB filled (minus gas buffer).');
    }catch(e){ setEr(e.message || 'Failed to read BNB balance'); }
  });

  // Gas pre-check for buyWithBNB (prevents "insufficient funds for gas * price + value")
  async function estimateBuyWithBnbCostWei(provider, contract, valueWei){
    // NOTE: gasPrice can vary; we add a small multiplier for safety
    const gasPrice = await provider.getGasPrice();
    let gasLimit;
    try{
      gasLimit = await contract.estimateGas.buyWithBNB({ value: valueWei });
    }catch{
      // fallback estimate if node refuses estimation (use a safe ceiling)
      gasLimit = ethers.BigNumber.from(180000);
    }
    const gasCost = gasPrice.mul(gasLimit);
    return { gasPrice, gasLimit, gasCost };
  }

  // BUY with BNB (with gas check)
  $('buyBNB')?.addEventListener('click', async ()=>{
    if(!presale||!signer||!walletProvider) return setEr('Connect wallet on BSC to buy.');
    const netNow = await walletProvider.getNetwork();
    if(Number(netNow.chainId)!==56) return setEr('Wrong network. Please switch to BSC.');

    try{
      const val = parseFloatSafe($('bnbAmount')?.value || '0');
      if(!val || val<=0) return setEr('Enter BNB amount');

      const valueWei = ethers.utils.parseEther(String(val));
      const addr     = await signer.getAddress();
      const balWei   = await walletProvider.getBalance(addr);

      // Estimate gas cost for this exact value
      const { gasCost } = await estimateBuyWithBnbCostWei(walletProvider, presale, valueWei);
      const needWei  = valueWei.add(gasCost);

      if(needWei.gt(balWei)){
        const have = Number(ethers.utils.formatEther(balWei));
        const need = Number(ethers.utils.formatEther(needWei));
        return setEr(`Insufficient BNB: you have ${have.toFixed(6)}, need ≈${need.toFixed(6)} (value + gas). Reduce amount or top up.`);
      }

      const tx = await presale.buyWithBNB({ value: valueWei });
      setOk('Transaction sent…');
      await tx.wait();
      setOk('Success: bought with BNB');
      await refreshStats();
    }catch(e){
      console.error(e);
      if(e?.code===4001) return setEr('Transaction was rejected by the user.');
      setEr(e?.data?.message || e?.message || 'BNB transaction failed');
    }
  });

  // USDT max
  $('maxUSDT')?.addEventListener('click', async ()=>{
    if(!usdt||!signer) return setEr('Connect wallet to use this.');
    try{
      const dec = await usdt.decimals(); // USDT on BSC is 18
      const bal = await usdt.balanceOf(await signer.getAddress());
      $('usdtAmount').value = ethers.utils.formatUnits(bal, dec);
      setOk('Max USDT filled.');
    }catch(e){ setEr(e.message || 'Failed to read USDT balance'); }
  });

  // BUY with USDT (by USDT amount)
  $('buyUSDT_amount')?.addEventListener('click', async ()=>{
    if(!usdt||!presale||!signer||!walletProvider) return setEr('Connect wallet on BSC to buy.');
    const netNow = await walletProvider.getNetwork();
    if(Number(netNow.chainId)!==56) return setEr('Wrong network. Please switch to BSC.');
    try{
      const dec = await usdt.decimals();
      const amt = parseFloatSafe($('usdtAmount')?.value || '0');
      if(!amt || amt<=0) return setEr('Enter USDT amount');
      const usdtWei = ethers.utils.parseUnits(String(amt), dec);

      const owner = await signer.getAddress();
      const allowance = await usdt.allowance(owner, PRESALE_ADDRESS);
      if(allowance.lt(usdtWei)){
        const txA = await usdt.approve(PRESALE_ADDRESS, usdtWei);
        setOk('Approving…');
        await txA.wait();
      }
      const tx = await presale.buyWithUSDT(usdtWei);
      setOk('Sending transaction…');
      await tx.wait();
      setOk(`Success: bought with ${amt} USDT`);
      await refreshStats();
    }catch(e){ console.error(e); setEr(e?.data?.message || e.message || 'USDT transaction failed'); }
  });

  // BUY with USDT (by target ALTRU amount)
  $('buyUSDT_altru')?.addEventListener('click', async ()=>{
    if(!usdt||!presale||!signer||!walletProvider) return setEr('Connect wallet on BSC to buy.');
    const netNow = await walletProvider.getNetwork();
    if(Number(netNow.chainId)!==56) return setEr('Wrong network. Please switch to BSC.');
    try{
      const a = parseFloatSafe($('altruAmount')?.value || '0');
      if(!a || a<=0) return setEr('Enter ALTRU amount');

      const altruWei = ethers.utils.parseUnits(String(a), altruDecimals);
      // Use latest RATE from presale (units: ALTRU per 1 USDT unit)
      const rateBN   = await presaleRead.rateUSDT();
      // ceil division to avoid underpay
      const usdtWei  = altruWei.add(rateBN.sub(1)).div(rateBN);

      const owner = await signer.getAddress();
      const allowance = await usdt.allowance(owner, PRESALE_ADDRESS);
      if(allowance.lt(usdtWei)){
        const txA = await usdt.approve(PRESALE_ADDRESS, usdtWei);
        setOk('Approving…');
        await txA.wait();
      }
      const tx = await presale.buyWithUSDT(usdtWei);
      setOk('Sending transaction…');
      await tx.wait();
      setOk(`Success: bought ${a} ALTRU`);
      await refreshStats();
    }catch(e){ console.error(e); setEr(e?.data?.message || e.message || 'USDT transaction failed'); }
  });

})();
</script>
</body>
</html>
