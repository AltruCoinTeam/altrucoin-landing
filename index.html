<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="AltruCoin ‚Äì The Token of Altruism on the Blockchain."/>
  <meta property="og:title" content="AltruCoin"/>
  <meta property="og:description" content="Every transaction supports real-world good."/>
  <meta property="og:image" content="og-image.png"/>
  <link rel="icon" href="favicon.ico"/>
  <title>AltruCoin ‚Äì Token of Altruism</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QBQVD56HTD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-QBQVD56HTD');
  </script>

  <!-- AOS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css"/>

  <style>
    /* ====== Design System ====== */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

    :root{
      --primary:#00c2ff; --secondary:#7d00ff;
      --bg-0:#0e1224; --bg-1:#121735; --bg-2:#0b1024;
      --text:#ffffff; --text-muted:#cfe4ff;
      --border:rgba(255,255,255,.14);
      --surface-grad:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      --shadow:0 10px 30px rgba(0,0,0,.25); --ring:0 0 0 3px rgba(0,194,255,.35);
      --radius:14px; --radius-lg:20px; --pad:16px; --maxw:1120px;
    }
    html[data-theme="light"]{
      --bg-0:#f6f8fc; --bg-1:#ffffff; --bg-2:#f0f4ff;
      --text:#0b1226; --text-muted:#374151; --border:rgba(0,0,0,.12);
      --surface-grad:linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,.01));
      --shadow:0 10px 30px rgba(16,24,40,.08); --ring:0 0 0 3px rgba(0,194,255,.35);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',sans-serif;
      background:
        radial-gradient(1200px 600px at 85% -10%, rgba(125,0,255,.20), transparent 60%),
        radial-gradient(900px 500px at -10% 10%, rgba(0,194,255,.16), transparent 60%),
        var(--bg-0);
      color:var(--text);
      line-height:1.55;
    }
    html[data-theme="light"] body{
      background:
        radial-gradient(1100px 560px at 85% -10%, rgba(125,0,255,.10), transparent 60%),
        radial-gradient(820px 480px at -10% 10%, rgba(0,194,255,.10), transparent 60%),
        var(--bg-0);
    }

    a{color:var(--primary);text-decoration:none}
    a:hover{text-decoration:underline}
    :focus-visible{outline:none;box-shadow:var(--ring);border-radius:12px}

    /* ====== Layout ====== */
    .container{max-width:var(--maxw);margin:0 auto;padding:0 20px}
    section{padding:64px 0;scroll-margin-top:84px}
    .section-header{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:16px;gap:12px}
    h1,h2,h3{letter-spacing:.2px}
    h1{font-size:clamp(2rem,4vw,3.25rem);line-height:1.1}
    h2{font-size:clamp(1.5rem,2.4vw,2rem)}
    h3{font-size:1.15rem}

    /* ====== Header ====== */
    header{
      position:sticky;top:0;z-index:50;
      backdrop-filter:saturate(160%) blur(10px);
      background:linear-gradient(to right, color-mix(in oklab, var(--bg-0) 85%, transparent), color-mix(in oklab, var(--bg-1) 85%, transparent));
      border-bottom:1px solid var(--border);
    }
    .nav{height:64px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .brand-badge{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--primary),var(--secondary));box-shadow:0 6px 18px rgba(0,194,255,.25), inset 0 0 20px rgba(255,255,255,.15)}
    .menu{display:flex;gap:8px;flex-wrap:wrap}
    .menu a{color:var(--text);opacity:.85;text-decoration:none;font-weight:600;padding:8px 10px;border-radius:10px}
    .menu a:hover,.menu a.active{background:color-mix(in oklab, var(--border) 30%, transparent)}
    .controls{display:flex;align-items:center;gap:8px}

    /* burger */
    .burger{display:none; width:40px;height:40px;border:1px solid var(--border);border-radius:12px;background:transparent;cursor:pointer}
    .burger span{display:block;width:22px;height:2px;background:var(--text);margin:5px auto;border-radius:1px}

    /* mobile menu */
    .drawer{display:none}
    .drawer.open{display:block}
    .drawer .menu{flex-direction:column;align-items:flex-start;padding:10px 0}
    .drawer a{padding:10px 12px;width:100%}

    /* ====== Hero ====== */
    .hero{
      padding:70px 0 40px;
      background:
        linear-gradient(135deg, color-mix(in oklab, var(--primary) 18%, transparent), color-mix(in oklab, var(--secondary) 12%, transparent)),
        linear-gradient(180deg, color-mix(in oklab, var(--text) 8%, transparent), transparent 40%);
      border-bottom:1px solid var(--border);
    }
    .hero-wrap{display:grid;grid-template-columns:1.15fr .85fr;gap:28px;align-items:center}
    .hero-card{
      background:var(--surface-grad);
      border:1px solid var(--border);border-radius:var(--radius-lg);
      padding:22px;box-shadow:var(--shadow)
    }
    .hero-actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:8px 12px;border:1px solid var(--border);border-radius:999px;
      background:color-mix(in oklab, var(--bg-2) 80%, transparent);color:var(--text-muted);font-size:.9rem
    }
    .price-pill{font-weight:700}

    .cta{
      display:inline-flex;align-items:center;gap:10px;
      padding:12px 16px;border-radius:12px;font-weight:700;text-decoration:none;border:1px solid var(--border)
    }
    .cta.primary{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#00111a;border:0}
    .cta.ghost{background:transparent;color:var(--text)}

    /* ====== Cards / Grids ====== */
    .card{background:var(--bg-1);border:1px solid var(--border);border-radius:var(--radius);padding:var(--pad);box-shadow:var(--shadow)}
    html[data-theme="light"] .card{background:var(--bg-1)}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
    .stack-16{display:grid;gap:16px}
    .muted{color:var(--text-muted);opacity:.95}

    /* ====== Tokenomics ====== */
    .tokenomics{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:12px}
    .tokenomics .cell{text-align:center;padding:18px;border-radius:14px;background:var(--surface-grad);border:1px solid var(--border)}
    .big-num{font-size:1.6rem;font-weight:700}

    /* ====== Forms & Buttons ====== */
    input{
      padding:12px;border:1px solid var(--border);border-radius:12px;background:var(--bg-2);color:var(--text);min-width:150px
    }
    input::placeholder{color:#94a3b8}
    button{padding:12px 14px;border:0;border-radius:12px;background:var(--primary);color:#00111a;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;color:var(--text);border:1px solid var(--border)}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

    /* ====== Liquidity ====== */
    .lock{background:linear-gradient(180deg,color-mix(in oklab,var(--primary) 12%, transparent), color-mix(in oklab, var(--text) 2%, transparent));border:1px solid var(--border);border-left:4px solid var(--primary);border-radius:var(--radius);padding:18px}

    /* ====== FAQ ====== */
    .faq ul{display:grid;gap:12px}
    .faq li{list-style:none}
    .faq .q{display:block;width:100%;text-align:left;background:transparent;border:1px solid var(--border);color:var(--text);padding:14px;border-radius:12px;font-weight:600}
    .faq .a{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;margin-top:8px;background:color-mix(in oklab, var(--bg-2) 80%, transparent)}

    /* ====== Footer ====== */
    footer{margin-top:64px;padding:28px 0;border-top:1px solid var(--border);background:linear-gradient(180deg, color-mix(in oklab, var(--text) 2%, transparent), transparent)}

    /* ====== Utilities ====== */
    .addr{font-family:ui-monospace,Menlo,Consolas;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:320px}
    .center{text-align:center}
    .nowrap{white-space:nowrap}

    /* ====== Toasts ====== */
    .toasts{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:10px;z-index:100}
    .toast{min-width:260px;max-width:94vw;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:var(--bg-1);box-shadow:var(--shadow);display:flex;gap:10px;align-items:flex-start}
    .toast.success{border-color:rgba(34,197,94,.35)}
    .toast.error{border-color:rgba(239,68,68,.35)}
    .toast .title{font-weight:700;margin-right:6px}
    .toast .close{margin-left:auto;background:transparent;border:0;cursor:pointer;color:var(--text)}

    /* ====== Network Warning Banner ====== */
    .net-warn{
      display:none;
      background:linear-gradient(180deg, rgba(239,68,68,.12), rgba(239,68,68,.04));
      border:1px solid rgba(239,68,68,.35);
      color:#fff;
      padding:14px;
      border-radius:12px;
      margin:14px 0;
    }
    html[data-theme="light"] .net-warn{color:#7a0e0e}

    /* ====== Last Purchases ====== */
    .activity-table{width:100%;border-collapse:separate;border-spacing:0 8px}
    .activity-row{
      background:var(--bg-1);
      border:1px solid var(--border);
      border-radius:12px;
      overflow:hidden;
    }
    .activity-row td{padding:10px 12px}
    .tag{display:inline-block;padding:4px 8px;border:1px solid var(--border);border-radius:999px;font-size:.82rem}

    /* Charity Impact */
    .kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .kpi .box{padding:16px;border:1px solid var(--border);border-radius:14px;background:var(--surface-grad);text-align:center}
    .kpi .val{font-size:1.6rem;font-weight:700;margin-top:4px}

    /* ====== Responsive ====== */
    @media (max-width: 980px){
      .menu{display:none}
      .burger{display:inline-block}
      .hero-wrap{grid-template-columns:1fr}
      .tokenomics{grid-template-columns:repeat(2,1fr)}
      .grid-3{grid-template-columns:1fr}
      .grid-2{grid-template-columns:1fr}
      .kpi{grid-template-columns:1fr}
    }
    @media (prefers-reduced-motion: reduce){
      *{animation:none !important;transition:none !important}
    }
  </style>
</head>
<body>
  <!-- ====== Header / Nav ====== -->
  <header>
    <div class="container nav">
      <div class="brand">
        <span class="brand-badge" aria-hidden="true"></span>
        <span>AltruCoin</span>
      </div>

      <nav class="menu" id="topMenu">
        <a href="#about">About</a>
        <a href="#tokenomics">Tokenomics</a>
        <a href="#buy">Buy</a>
        <a href="#chart">Chart</a>
        <a href="#roadmap">Roadmap</a>
        <a href="#community">Community</a>
        <a href="#charity">Charity</a>
        <a href="audit.html">Transparency</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="controls">
        <a href="audit.html" class="cta ghost" aria-label="Transparency Report">üßæ Transparency</a>
        <button class="burger" id="burger" aria-label="Menu" aria-expanded="false" aria-controls="drawer">
          <span></span><span></span><span></span>
        </button>
        <button id="themeToggle" class="cta ghost" aria-label="Toggle theme">üåì Theme</button>
      </div>
    </div>
    <div class="container drawer" id="drawer">
      <nav class="menu">
        <a href="#about">About</a>
        <a href="#tokenomics">Tokenomics</a>
        <a href="#buy">Buy</a>
        <a href="#chart">Chart</a>
        <a href="#roadmap">Roadmap</a>
        <a href="#community">Community</a>
        <a href="#charity">Charity</a>
        <a href="audit.html">Transparency</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <!-- ====== Hero ====== -->
  <section class="hero" data-aos="fade-up">
    <div class="container hero-wrap">
      <div>
        <h1>The Web3 Token of Altruism</h1>
        <p class="muted" style="max-width:640px;margin-top:10px">
          Every transaction helps real people, animals, and the planet ‚Äî transparently and on-chain.
        </p>
        <div class="hero-actions">
          <a class="cta primary" href="#buy">Buy $ALTRU</a>
          <a class="cta ghost" href="audit.html">üßæ Transparency Report</a>
          <a class="cta ghost" href="Whitepaper.pdf" target="_blank">üìÑ Whitepaper</a>
          <span class="pill price-pill">ALTRU: <span id="altruPrice">‚Äî</span></span>
        </div>
      </div>
      <div class="hero-card">
        <!-- Network warning banner -->
        <div id="netWarning" class="net-warn">
          ‚ö†Ô∏è You are connected to <b><span id="wrongNetName">Unknown</span></b>. Please switch to <b>BNB Smart Chain (BSC)</b>.
          <div class="row" style="margin-top:8px">
            <button id="switchToBsc">üîÅ Switch to BSC</button>
          </div>
        </div>

        <div class="row" style="margin-bottom:10px">
          <span class="pill"><strong>Network:</strong> <span id="netName" class="nowrap">&nbsp;‚Äî&nbsp;</span> (<span id="chainId">‚Äî</span>)</span>
          <span class="pill"><strong>Account:</strong> <span id="account" class="addr">‚Äî</span></span>
        </div>
        <div class="grid-3">
          <div class="card">
            <div class="muted">Contract (Presale)</div>
            <div id="contractAddr" class="addr" style="margin-top:6px">‚Äî</div>
          </div>
          <div class="card">
            <div class="muted">BNB ‚Üí USD (oracle)</div>
            <div id="bnbUsd" style="margin-top:6px">‚Äî</div>
          </div>
          <div class="card">
            <div class="muted">Rate</div>
            <div id="rateUSDT" class="big-num" style="margin-top:6px">‚Äî</div>
            <div class="muted" style="font-size:.9rem">ALTRU / 1 USDT</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ====== About ====== -->
  <section id="about" data-aos="fade-up">
    <div class="container">
      <div class="section-header">
        <h2>About</h2>
      </div>
      <div class="grid-2">
        <div class="card">
          <p>AltruCoin is a Web3-powered cryptocurrency with a mission: to turn market activity into meaningful charitable impact. Every time someone trades the token, a fee is collected and distributed monthly:</p>
          <ul style="margin-top:10px;padding-left:1.1rem">
            <li><strong>50%</strong> ‚Äî to verified charities (in USDT)</li>
            <li><strong>25%</strong> ‚Äî for development & audits</li>
            <li><strong>25%</strong> ‚Äî for token buybacks</li>
          </ul>
          <p style="margin-top:10px">Built on BNB Smart Chain for low fees and speed. Token holders drive the mission through DAO voting. Upcoming: UAE foundation registration & AltruScan dashboard.</p>
          <div style="margin-top:14px">
            <a class="cta ghost" href="Whitepaper.pdf" target="_blank">üìÑ View Whitepaper (PDF)</a>
          </div>
        </div>
        <div class="card">
          <h3>Quick Facts</h3>
          <div class="stack-16" style="margin-top:10px">
            <div class="row"><span class="pill">Fast & low fees</span><span class="pill">Transparent</span><span class="pill">Deflationary</span></div>
            <div class="row"><span class="pill">DAO-ready</span><span class="pill">On-chain impact</span></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ====== Tokenomics ====== -->
  <section id="tokenomics" data-aos="fade-up">
    <div class="container">
      <div class="section-header">
        <h2>Tokenomics</h2>
      </div>

      <p class="muted">All trading fee revenue is distributed monthly:</p>
      <div class="tokenomics">
        <div class="cell"><div class="big-num">50%</div>Charity (USDT)</div>
        <div class="cell"><div class="big-num">25%</div>Project & Dev</div>
        <div class="cell"><div class="big-num">25%</div>Token Buyback</div>
        <div class="cell">
          <div class="muted">Status</div>
          <div style="display:flex;gap:14px;justify-content:center;margin-top:6px">
            <span class="pill">Sold: <span id="sold">‚Äî</span></span>
            <span class="pill">Cap: <span id="cap">‚Äî</span></span>
            <span class="pill">In contract: <span id="balance">‚Äî</span></span>
          </div>
        </div>
      </div>

      <p style="margin-top:18px" class="muted">Token allocation:</p>
      <div class="tokenomics">
        <div class="cell"><div class="big-num">20%</div>Private Sale</div>
        <div class="cell"><div class="big-num">30%</div>Public Launch</div>
        <div class="cell"><div class="big-num">10%</div>Team (vested)</div>
        <div class="cell"><div class="big-num">40%</div>Reserve & Ecosystem</div>
      </div>
    </div>
  </section>

  <!-- ====== Buy ====== -->
  <section id="buy" data-aos="fade-up">
    <div class="container">
      <div class="section-header">
        <h2>Buy $ALTRU</h2>
        <div class="row">
          <a class="cta ghost" href="audit.html">üßæ Transparency</a>
          <a class="cta ghost" href="https://pancakeswap.finance/swap?outputCurrency=0x24f3F00A8e6E8a37490b2244C7705a7A005dDb4E" target="_blank">üî• Buy on PancakeSwap</a>
        </div>
      </div>

      <div class="grid-2">
        <div class="card">
          <h3>Buy with BNB</h3>
          <div class="row" style="margin-top:10px">
            <input id="bnbAmount" type="number" step="0.0001" placeholder="BNB amount"/>
            <button id="maxBNB" class="ghost">Max BNB</button>
            <button id="buyBNB">Buy</button>
          </div>
          <div class="muted" style="margin-top:8px">Send BNB; tokens are calculated on-chain via Chainlink BNB/USD √ó rate.</div>
        </div>

        <div class="card">
          <h3>Buy with USDT</h3>
          <div class="row" style="margin-top:10px">
            <input id="usdtAmount" type="number" step="0.01" placeholder="USDT amount"/>
            <button id="maxUSDT" class="ghost">Max USDT</button>
            <button id="buyUSDT_amount">Buy (USDT)</button>
          </div>
          <div class="muted" style="margin:10px 0 6px">Or target an ALTRU amount (auto-computes USDT):</div>
          <div class="row">
            <input id="altruAmount" type="number" step="100000" value="100000" min="100000" placeholder="ALTRU amount"/>
            <button id="buyUSDT_altru">Buy (ALTRU)</button>
          </div>
          <div class="muted" style="margin-top:8px">We auto-approve if allowance is insufficient.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ====== Chart ====== -->
  <section id="chart" data-aos="fade-up">
    <div class="container">
      <div class="section-header">
        <h2>Live Price Chart</h2>
      </div>
      <div class="card">
        <iframe
          src="https://dexscreener.com/bsc/0x5a59F6581EF65099bE92B491c9B36B4a66727707?embed=1&theme=dark"
          width="100%" height="520" style="border:0;border-radius:12px" allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <!-- ====== Roadmap ====== -->
  <section id="roadmap" data-aos="fade-up">
    <div class="container">
      <div class="section-header"><h2>Roadmap</h2></div>
      <div class="grid-3">
        <div class="card"><strong>‚úÖ Token deployment</strong><br><span class="muted">Contract live & verified</span></div>
        <div class="card"><strong>üöÄ PancakeSwap listing</strong><br><span class="muted">Liquidity & trading</span></div>
        <div class="card"><strong>üó≥ DAO governance</strong><br><span class="muted">Community-driven votes</span></div>
        <div class="card"><strong>üìä Charity dashboard</strong><br><span class="muted">AltruScan transparency</span></div>
        <div class="card"><strong>üèõ UAE foundation</strong><br><span class="muted">Legal structure</span></div>
      </div>
    </div>
  </section>

  <!-- ====== Liquidity Locked ====== -->
  <section data-aos="fade-up">
    <div class="container">
      <div class="lock">
        <h3 style="margin-bottom:8px; color: var(--primary)">üîí Liquidity Locked</h3>
        <p class="muted">To ensure long-term trust and prevent rug pulls, the ALTRU/BNB liquidity on PancakeSwap has been locked via PinkLock.</p>
        <a href="https://www.pinksale.finance/pinklock/bsc/record/1340541" target="_blank" class="cta" style="margin-top:12px;display:inline-flex">üîê View Lock on PinkSale</a>
      </div>
    </div>
  </section>

  <!-- ====== Community ====== -->
  <section id="community" data-aos="fade-up">
    <div class="container">
      <div class="section-header"><h2>Community</h2></div>
      <p>Join our growing movement and connect with others who believe in blockchain-powered altruism.</p>
      <div class="row center" style="justify-content:center;margin:16px 0 28px">
        <a class="cta" href="https://t.me/AltrucoinGroup" target="_blank">üì¢ Telegram Channel</a>
        <a class="cta" href="https://t.me/AltrucoinChat" target="_blank">üí¨ Telegram Chat</a>
        <button onclick="addToken()" class="cta primary">ü¶ä Add $ALTRU to MetaMask</button>
      </div>
    </div>
  </section>

  <!-- ====== Last Purchases ====== -->
  <section id="activity" data-aos="fade-up">
    <div class="container">
      <div class="section-header"><h2>Last purchases</h2></div>
      <div class="card">
        <div class="muted" style="margin-bottom:10px">Live updates (latest 5)</div>
        <div class="stack-16" id="lastPurchases">
          <div class="muted">Listening‚Ä¶</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ====== Charity impact ====== -->
  <section id="charity" data-aos="fade-up">
    <div class="container">
      <div class="section-header"><h2>Charity impact</h2><span class="muted">Transparent on-chain</span></div>
      <div class="card" id="charityCard" style="display:none">
        <div class="kpi">
          <div class="box">
            <div class="muted">Tax ‚Üí Charity</div>
            <div class="val"><span id="charityTaxPct">‚Äî</span></div>
          </div>
          <div class="box">
            <div class="muted">Total donated</div>
            <div class="val"><span id="charityTotal">‚Äî</span></div>
            <div class="muted" style="font-size:.9rem" id="charitySince">‚Äî</div>
          </div>
          <div class="box">
            <div class="muted">Last month</div>
            <div class="val"><span id="charityMonthly">‚Äî</span></div>
          </div>
        </div>
        <div class="stack-16" style="margin-top:16px">
          <h3>Last distributions</h3>
          <div id="charityFeed" class="stack-16">
            <div class="muted">Loading transfers‚Ä¶</div>
          </div>
          <div class="muted" id="charityNote" style="font-size:.9rem"></div>
        </div>
        <div class="stack-16" style="margin-top:16px">
          <h3>Wallets (info)</h3>
          <div class="activity-row">
            <table class="activity-table"><tbody><tr>
              <td><span class="muted">Charity wallet</span><br><span class="addr" id="charityAddrView"></span></td>
              <td><span class="muted">Project wallet</span><br><span class="addr" id="projectAddrView"></span></td>
              <td><span class="muted">Burn wallet</span><br><span class="addr" id="burnAddrView"></span></td>
            </tr></tbody></table>
          </div>
        </div>
      </div>
      <div class="card" id="charityEmpty">
        <div class="muted">Charity wallets are not configured yet. Add addresses to show live donations.</div>
      </div>
    </div>
  </section>

  <!-- ====== FAQ ====== -->
  <section id="faq" data-aos="fade-up" class="faq">
    <div class="container">
      <div class="section-header"><h2>FAQ</h2></div>
      <ul>
        <li>
          <button class="q" onclick="toggleFaq(this)">What is AltruCoin?</button>
          <div class="a" hidden>A crypto token on BNB Smart Chain where every trade supports real charitable causes.</div>
        </li>
        <li>
          <button class="q" onclick="toggleFaq(this)">How are transaction fees used?</button>
          <div class="a" hidden>5% fee breakdown:<br>‚Äì 2.5% to charities (in USDT)<br>‚Äì 2% to development & liquidity<br>‚Äì 0.5% auto-burn</div>
        </li>
        <li>
          <button class="q" onclick="toggleFaq(this)">Is the token safe?</button>
          <div class="a" hidden>Yes ‚Äî contract is open-source, verifiable, audited soon.</div>
        </li>
        <li>
          <button class="q" onclick="toggleFaq(this)">How to add ALTRU?</button>
          <div class="a" hidden>Use the ü¶ä Add to MetaMask button in the Community section.</div>
        </li>
      </ul>
    </div>
  </section>

  <!-- ====== Contact / Donate ====== -->
  <section id="contact" data-aos="fade-up">
    <div class="container">
      <div class="section-header"><h2>Contact</h2></div>
      <p>üì© For support, partnerships, or media inquiries ‚Äî reach out to us:</p>
      <div class="center" style="margin-top:12px">
        <a href="mailto:support@altrucoin.org" class="cta">support@altrucoin.org</a>
      </div>

      <div class="card" style="margin-top:24px">
        <h3>‚ù§Ô∏è Support / Donate</h3>
        <p style="word-break:break-all; font-size:1rem;margin-top:6px">0x7c76AA8d29F1F075846ED04446197f4fda047c4d</p>
        <button class="cta" style="margin-top:8px" onclick="navigator.clipboard.writeText('0x7c76AA8d29F1F075846ED04446197f4fda047c4d')">üìã Copy Address</button>
        <div style="margin-top:14px">
          <img src="donation-qr.png" alt="Donation QR" style="max-width:180px;border-radius:12px;border:1px solid var(--border)" />
          <p class="muted" style="font-size:.9rem;margin-top:6px">Scan via MetaMask / Trust Wallet</p>
        </div>
        <p class="muted" style="margin-top:12px">
          You can send USDT (BEP-20), BNB or any supported BEP-20 token.<br/>
          Always verify the network and address before sending.
        </p>
        <p style="margin-top:6px">
          <a href="https://bscscan.com/address/0x7c76AA8d29F1F075846ED04446197f4fda047c4d" target="_blank">üîç View on BscScan</a>
        </p>
      </div>
    </div>
  </section>

  <footer>
    <div class="container center">
      &copy; 2025 AltruCoin ‚Äî Built with purpose. Powered by people.<br/>
      üßæ <a href="audit.html">Transparency Report</a> ‚Ä¢
      üì© <a href="mailto:support@altrucoin.org">support@altrucoin.org</a> ‚Ä¢ ‚ù§Ô∏è 0x7c76AA8d29F1F075846ED04446197f4fda047c4d
    </div>
  </footer>

  <!-- ====== Toasts container ====== -->
  <div class="toasts" id="toasts" aria-live="polite" aria-atomic="true"></div>

  <!-- ====== Scripts ====== -->
  <script>
    // ---- Theme (auto + manual toggle) ----
    const root = document.documentElement;
    const THEME_KEY = 'altru-theme';
    function applyTheme(mode){
      root.setAttribute('data-theme', mode);
      localStorage.setItem(THEME_KEY, mode);
      if(mode==='auto'){
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        root.setAttribute('data-theme', prefersDark?'dark':'light');
      }
    }
    (function initTheme(){
      const saved = localStorage.getItem(THEME_KEY) || 'auto';
      applyTheme(saved);
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
        if(localStorage.getItem(THEME_KEY)==='auto') applyTheme('auto');
      });
      document.getElementById('themeToggle')?.addEventListener('click', ()=>{
        const cur = document.documentElement.getAttribute('data-theme');
        const next = cur==='dark' ? 'light' : 'dark';
        applyTheme(next);
      });
    })();

    // ---- Mobile drawer ----
    const burger = document.getElementById('burger');
    const drawer = document.getElementById('drawer');
    burger?.addEventListener('click', ()=>{
      const open = drawer.classList.toggle('open');
      burger.setAttribute('aria-expanded', open?'true':'false');
    });

    // ---- Active menu on scroll ----
    const links = [...document.querySelectorAll('#topMenu a, #drawer a')];
    const targets = [...new Set(links.map(a => a.getAttribute('href')).filter(h=>h && h.startsWith('#')))]
      .map(sel => document.querySelector(sel));
    function setActive(){
      const y = window.scrollY + 120;
      let idx = 0;
      targets.forEach((sec,i)=>{ if(sec && sec.offsetTop <= y) idx = i;});
      document.querySelectorAll('#topMenu a').forEach((a,i)=>a.classList.toggle('active', targets[i] && i===idx));
    }
    window.addEventListener('scroll', setActive, {passive:true});
    setActive();

    // ---- FAQ toggle ----
    function toggleFaq(btn){
      const ans = btn.nextElementSibling;
      const isHidden = ans.hasAttribute('hidden');
      document.querySelectorAll('.faq .a').forEach(a=>a.setAttribute('hidden',''));
      if(isHidden) ans.removeAttribute('hidden');
      setTimeout(()=>ans.scrollIntoView({behavior:'smooth',block:'start'}),100);
    }
    window.toggleFaq = toggleFaq;

    // ---- Toasts ----
    function showToast(message, type='info', title=''){
      const wrap = document.getElementById('toasts');
      const t = document.createElement('div');
      t.className = `toast ${type}`;
      t.innerHTML = `
        <div>
          ${title?`<div class="title">${title}</div>`:''}
          <div>${message}</div>
        </div>
        <button class="close" aria-label="Close">‚úï</button>
      `;
      wrap.appendChild(t);
      const closer = t.querySelector('.close');
      const timer = setTimeout(()=>{ t.remove(); }, 4500);
      closer.onclick = ()=>{ clearTimeout(timer); t.remove(); };
    }

    // ---- Number animation ----
    function animateNumber(el, target, opts={}){
      if(!el) return;
      const {duration=700, format=(n)=>n.toLocaleString('en-US')} = opts;
      const start = Number(el.dataset.value || 0);
      const end = Number(target);
      const diff = end - start;
      const t0 = performance.now();
      function step(t){
        const k = Math.min(1, (t - t0)/duration);
        const eased = 1 - Math.pow(1-k, 3);
        const val = start + diff*eased;
        el.textContent = format(val);
        if(k<1) requestAnimationFrame(step); else el.dataset.value = String(end);
      }
      requestAnimationFrame(step);
    }
  </script>

  <script>
    async function addToken() {
      try {
        const wasAdded = await window.ethereum.request({
          method: 'wallet_watchAsset',
          params: {
            type: 'ERC20',
            options: {
              address: '0x24f3F00A8e6E8a37490b2244C7705a7A005dDb4E',
              symbol: 'ALTRU',
              decimals: 18,
              image: 'https://altrucoin.org/favicon.ico'
            }
          }
        });
        if (wasAdded) showToast('Token added to MetaMask.', 'success', 'MetaMask');
        else showToast('User cancelled token add.', 'error', 'MetaMask');
      } catch (error) {
        console.error(error);
        showToast(error?.message || 'Failed to add token.', 'error', 'MetaMask');
      }
    }
    window.addToken = addToken;
  </script>

  <!-- AOS script -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>AOS.init();</script>

  <!-- Dexscreener price fetch (hero price pill) -->
  <script>
    async function fetchAltruPrice() {
      try {
        const res = await fetch("https://api.dexscreener.com/latest/dex/pairs/bsc/0x5a59F6581EF65099bE92B491c9B36B4a66727707");
        const data = await res.json();
        const price = parseFloat(data.pair.priceUsd);
        const el = document.getElementById("altruPrice");
        if (el) el.textContent = `$${price.toFixed(8)}`;
      } catch (e) {
        console.error("Error fetching ALTRU price:", e);
      }
    }
    fetchAltruPrice();
    setInterval(fetchAltruPrice, 15000);
  </script>

  <!-- ethers.js + widget logic -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
  (async function(){
    const PRESALE_ADDRESS = "0x4D3F586Dc66f41a05d36F960121E2C7F1a5Ab64c";
    const ALTRU_ADDRESS   = "0x24f3F00A8e6E8a37490b2244C7705a7A005dDb4E";
    const USDT_ADDRESS    = "0x55d398326f99059fF775485246999027B3197955";
    const FEED_ADDRESS    = "0x0567F2323251f0Aab15c8dFb1967E4e8A7D42aeE"; // BNB/USD

    /* ===== CONFIG: Wallets & Charity ===== */
    const charityWallet = "0x7A37175E2C27679e1Ad6b648080AA3E5CB35bd86";
    const projectWallet = "0x7A37175E2C27679e1Ad6b648080AA3E5CB35bd86";
    const burnWallet    = "0x000000000000000000000000000000000000dEaD";

    const CHARITY_RECIPIENTS = [ charityWallet ];
    const CHARITY_START_BLOCK = 41000000; // TODO: replace with your real start block
    const CHARITY_TAX_BPS = 250;

    const PRESALE_ABI = [
      "event BoughtWithBNB(address indexed buyer, uint256 usdtWei, uint256 amountALTRU, uint256 paidBNB)",
      "event BoughtWithUSDT(address indexed buyer, uint256 usdtWei, uint256 amountALTRU)",
      "function rateUSDT() view returns (uint256)",
      "function hardCapTokens() view returns (uint256)",
      "function soldTokens() view returns (uint256)",
      "function paused() view returns (bool)",
      "function buyWithBNB() payable",
      "function buyWithUSDT(uint256 usdtWei)"
    ];
    const ERC20_ABI = [
      "event Transfer(address indexed from, address indexed to, uint256 value)",
      "function balanceOf(address) view returns (uint256)",
      "function approve(address spender, uint256 amount) returns (bool)",
      "function allowance(address owner, address spender) view returns (uint256)",
      "function decimals() view returns (uint8)",
      "function symbol() view returns (string)"
    ];
    const FEED_ABI = [
      "function latestRoundData() view returns (uint80,int256,uint256,uint256,uint80)",
      "function decimals() view returns (uint8)"
    ];

    const $  = id => document.getElementById(id);
    const fmtUnits = (v,d=18)=>{ try{return ethers.utils.formatUnits(v,d)}catch{return String(v)} };
    const short = (a)=> a?`${a.slice(0,6)}‚Ä¶${a.slice(-4)}`:'‚Äî';
    const num = (n,max=0)=> (Number(n)||0).toLocaleString('en-US',{maximumFractionDigits:max});

    if(!window.ethereum){
      showToast('Please install MetaMask to continue.', 'error', 'Wallet');
      return;
    }
    const ok = (m) => showToast(m, 'success');
    const er = (m) => showToast(m, 'error');

    const provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send('eth_requestAccounts', []);
    const signer  = provider.getSigner();

    const presale = new ethers.Contract(PRESALE_ADDRESS, PRESALE_ABI, signer);
    const altru   = new ethers.Contract(ALTRU_ADDRESS,   ERC20_ABI, provider);
    const usdt    = new ethers.Contract(USDT_ADDRESS,    ERC20_ABI, signer);
    const feed    = new ethers.Contract(FEED_ADDRESS,    FEED_ABI,  provider);

    // Indicators + network check
    const net = await provider.getNetwork();
    const acct = await signer.getAddress();
    const chainIdDec = Number(net.chainId);
    const isBsc = chainIdDec === 56;

    if($('netName'))  $('netName').textContent = net.name || (isBsc?'BSC':'Unknown');
    if($('chainId'))  $('chainId').textContent = chainIdDec;
    if($('account'))  $('account').textContent = acct;
    if($('contractAddr')) $('contractAddr').textContent = PRESALE_ADDRESS;

    const warn = $('netWarning');
    if(!isBsc && warn){
      $('wrongNetName').textContent = net.name || `Chain ${chainIdDec}`;
      warn.style.display = 'block';
    }

    async function switchToBsc(){
      try{
        await window.ethereum.request({
          method: 'wallet_switchEthereumChain',
          params: [{ chainId: '0x38' }] // 56
        });
        ok('Switched to BSC.');
        location.reload();
      }catch(e){
        if(e?.code === 4902){
          try{
            await window.ethereum.request({
              method: 'wallet_addEthereumChain',
              params: [{
                chainId: '0x38',
                chainName: 'BNB Smart Chain',
                nativeCurrency: { name: 'BNB', symbol: 'BNB', decimals: 18 },
                rpcUrls: ['https://bsc-dataseed.binance.org'],
                blockExplorerUrls: ['https://bscscan.com']
              }]
            });
            await window.ethereum.request({
              method: 'wallet_switchEthereumChain',
              params: [{ chainId: '0x38' }]
            });
            ok('BSC added & switched.');
            location.reload();
          }catch(e2){
            console.error(e2);
            er(e2?.message || 'Failed to add/switch to BSC.');
          }
        }else{
          console.error(e);
          er(e?.message || 'Failed to switch network.');
        }
      }
    }
    document.getElementById('switchToBsc')?.addEventListener('click', switchToBsc);

    // RATE & stats
    let RATE = await presale.rateUSDT();

    function anim(el, v, max=0){
      animateNumber(el, Number(v), {format:(x)=>num(x,max)});
    }

    async function refreshStats(){
      try{
        const [cap,sold,bal,rd,dec] = await Promise.all([
          presale.hardCapTokens(),
          presale.soldTokens(),
          altru.balanceOf(PRESALE_ADDRESS),
          feed.latestRoundData(),
          feed.decimals()
        ]);

        const rateEl = $('rateUSDT');
        if(rateEl){ anim(rateEl, RATE.toString(), 0); }

        const capEl = $('cap'), soldEl = $('sold'), balEl = $('balance');
        if(capEl)  anim(capEl,  +fmtUnits(cap), 0);
        if(soldEl) anim(soldEl, +fmtUnits(sold), 0);
        if(balEl)  anim(balEl,  +fmtUnits(bal), 0);

        const bnbUsd = Number(rd[1]) / (10 ** Number(dec));
        if($('bnbUsd')) $('bnbUsd').textContent = `$${bnbUsd.toLocaleString('en-US',{maximumFractionDigits:2})} / BNB`;
      }catch(e){ console.warn('refresh failed', e); }
    }
    await refreshStats();

    // ---- Last Purchases (seed + live) ----
    const activityEl = $('lastPurchases');
    const activity = []; // newest first

    function addrShort(a){ return a ? (a.slice(0,6)+'‚Ä¶'+a.slice(-4)) : '‚Äî'; }
    function tsFmtFromBlockTs(ts){
      try{
        const d = new Date(ts);
        return d.toLocaleString([], {hour:'2-digit', minute:'2-digit', day:'2-digit', month:'short'});
      }catch{ return '‚Äî'; }
    }
    function renderActivity(){
      if(!activityEl) return;
      activityEl.innerHTML = '';
      if(activity.length===0){
        const empty = document.createElement('div');
        empty.className = 'muted';
        empty.textContent = 'No purchases yet.';
        activityEl.appendChild(empty);
        return;
      }
      activity.slice(0,5).forEach(item=>{
        const row = document.createElement('div');
        row.className = 'activity-row';
        row.innerHTML = `
          <table class="activity-table"><tbody>
            <tr>
              <td style="width:16ch"><span class="muted">${tsFmtFromBlockTs(item.time)}</span></td>
              <td style="width:18ch"><span class="tag">${item.kind}</span></td>
              <td style="min-width:20ch"><span class="addr">${addrShort(item.buyer)}</span></td>
              <td><strong>${num(item.altru, 0)}</strong> ALTRU</td>
              <td class="muted">${item.kind==='BNB' ? `${item.bnb} BNB` : `${item.usdt} USDT`}</td>
            </tr>
          </tbody></table>
        `;
        activityEl.appendChild(row);
      });
    }

    try{
      const tip = await provider.getBlockNumber();
      const from = Math.max(1, tip - 50000);

      const e1 = await presale.queryFilter(presale.filters.BoughtWithBNB(), from, tip);
      const e2 = await presale.queryFilter(presale.filters.BoughtWithUSDT(), from, tip);

      const merged = e1.concat(e2)
        .sort((a,b)=> (b.blockNumber - a.blockNumber))
        .slice(0,5);

      for (const ev of merged){
        const blk = await provider.getBlock(ev.blockNumber);
        const tsMs = (blk.timestamp || 0) * 1000;

        if(ev.event === 'BoughtWithBNB'){
          const [buyer, usdtWei, amountALTRU, paidBNB] = ev.args;
          activity.push({
            kind:'BNB',
            time: tsMs,
            buyer: String(buyer),
            altru: Number(ethers.utils.formatUnits(amountALTRU, 18)),
            bnb:   Number(ethers.utils.formatUnits(paidBNB, 18)).toFixed(5)
          });
        }else if(ev.event === 'BoughtWithUSDT'){
          const [buyer, usdtWei, amountALTRU] = ev.args;
          activity.push({
            kind:'USDT',
            time: tsMs,
            buyer: String(buyer),
            altru: Number(ethers.utils.formatUnits(amountALTRU, 18)),
            usdt:  Number(ethers.utils.formatUnits(usdtWei, 18)).toFixed(2)
          });
        }
      }
      renderActivity();
    }catch(e){
      console.warn('seed activity failed', e);
    }

    try{
      presale.on('BoughtWithBNB', async (buyer, usdtWei, amountALTRU, paidBNB, ev)=>{
        const blk = await provider.getBlock(ev.blockNumber);
        activity.unshift({
          kind:'BNB',
          time: (blk.timestamp||0)*1000,
          buyer: String(buyer),
          altru: Number(ethers.utils.formatUnits(amountALTRU, 18)),
          bnb:   Number(ethers.utils.formatUnits(paidBNB, 18)).toFixed(5)
        });
        renderActivity();
        await refreshStats();
        ok('Purchase confirmed (BNB).');
      });
      presale.on('BoughtWithUSDT', async (buyer, usdtWei, amountALTRU, ev)=>{
        const blk = await provider.getBlock(ev.blockNumber);
        activity.unshift({
          kind:'USDT',
          time: (blk.timestamp||0)*1000,
          buyer: String(buyer),
          altru: Number(ethers.utils.formatUnits(amountALTRU, 18)),
          usdt:  Number(ethers.utils.formatUnits(usdtWei, 18)).toFixed(2)
        });
        renderActivity();
        await refreshStats();
        ok('Purchase confirmed (USDT).');
      });
    }catch(e){ console.warn('event attach failed', e); }

    provider.on('block', (n)=>{ if(n%6===0) refreshStats(); });

    // Wallet changes
    if(window.ethereum){
      window.ethereum.on('accountsChanged', ()=>location.reload());
      window.ethereum.on('chainChanged',   ()=>location.reload());
    }

    // ---- Charity Impact ----
    const charityCard = $('charityCard'), charityEmpty=$('charityEmpty');
    const elTax=$('charityTaxPct'), elTotal=$('charityTotal'), elSince=$('charitySince'), elMon=$('charityMonthly'), feedEl=$('charityFeed'), noteEl=$('charityNote');
    $('charityAddrView').textContent = charityWallet;
    $('projectAddrView').textContent = projectWallet;
    $('burnAddrView').textContent    = burnWallet;

    async function loadCharity(){
      if(!CHARITY_RECIPIENTS.length){ charityEmpty.style.display='block'; charityCard.style.display='none'; return; }
      charityEmpty.style.display='none'; charityCard.style.display='block';
      elTax.textContent = (CHARITY_TAX_BPS/100).toFixed(2) + '%';

      const usdtRead = new ethers.Contract(USDT_ADDRESS, ERC20_ABI, provider);
      const [decimals, symbol] = await Promise.all([usdtRead.decimals(), usdtRead.symbol()]);

      const tip = await provider.getBlockNumber();
      const nowBlock = await provider.getBlock(tip);
      const nowTs = (nowBlock.timestamp||0)*1000;
      const monthAgoTs = nowTs - 30*24*60*60*1000;

      const step = 500_000;
      let totalWei = ethers.BigNumber.from(0);
      const events = [];

      for(let start=CHARITY_START_BLOCK; start<=tip; start += step){
        const end = Math.min(tip, start + step - 1);
        const batchPromises = CHARITY_RECIPIENTS.map(rcpt=>{
          const topic = ethers.utils.id("Transfer(address,address,uint256)");
          const rcptTopic = ethers.utils.hexZeroPad(rcpt, 32).toLowerCase();
          return provider.getLogs({
            address: USDT_ADDRESS,
            fromBlock: start, toBlock: end,
            topics: [topic, null, rcptTopic]
          });
        });
        const chunks = await Promise.all(batchPromises);
        for(const logs of chunks){
          for(const lg of logs){
            const parsed = usdtRead.interface.parseLog(lg);
            const value = parsed.args.value; const to = String(parsed.args.to).toLowerCase();
            if(to === burnWallet.toLowerCase()) continue;
            const blk = await provider.getBlock(lg.blockNumber);
            const ts = (blk.timestamp||0)*1000;
            totalWei = totalWei.add(value);
            events.push({ ts, hash: lg.transactionHash, to, wei: value });
          }
        }
      }

      const total = Number(fmtUnits(totalWei, decimals));
      elTotal.textContent = `${total.toLocaleString('en-US',{maximumFractionDigits:2})} ${symbol}`;
      elSince.textContent = `since block ${CHARITY_START_BLOCK.toLocaleString()}`;

      const monthWei = events.filter(e=>e.ts >= monthAgoTs).reduce((acc,e)=>acc.add(e.wei), ethers.BigNumber.from(0));
      const monthly = Number(fmtUnits(monthWei, decimals));
      elMon.textContent = `${monthly.toLocaleString('en-US',{maximumFractionDigits:2})} ${symbol}`;

      events.sort((a,b)=>b.ts-a.ts);
      feedEl.innerHTML = '';
      events.slice(0,5).forEach(ev=>{
        const row = document.createElement('div'); row.className='activity-row';
        const when = new Date(ev.ts).toLocaleString([], {hour:'2-digit', minute:'2-digit', day:'2-digit', month:'short'});
        row.innerHTML = `<table class="activity-table"><tbody><tr>
          <td style="width:16ch"><span class="muted">${when}</span></td>
          <td style="min-width:24ch" class="addr">${short(ev.to)}</td>
          <td><strong>${Number(fmtUnits(ev.wei,decimals)).toLocaleString('en-US',{maximumFractionDigits:2})}</strong> ${symbol}</td>
          <td class="muted"><a href="https://bscscan.com/tx/${ev.hash}" target="_blank">Tx</a></td>
        </tr></tbody></table>`;
        feedEl.appendChild(row);
      });

      noteEl.textContent = `Summing all ${symbol} transfers to ${CHARITY_RECIPIENTS.length} charity wallet(s).`;
    }

    try{ await loadCharity(); }catch(e){ console.warn('charity scan failed', e); noteEl.textContent='Failed to load charity data.'; }

    try{
      const usdtRead = new ethers.Contract(USDT_ADDRESS, ERC20_ABI, provider);
      CHARITY_RECIPIENTS.forEach(rcpt=>{
        usdtRead.on(usdtRead.filters.Transfer(null, rcpt), async ()=>{
          showToast('New charity transfer detected.', 'success');
          try{ await loadCharity(); }catch(_){}
        });
      });
    }catch(e){ console.warn('charity live listener failed', e); }

    // ---- Buy actions ----
    const parseFloatSafe = (v)=>{ const n = Number(v); return isFinite(n)?n:0; };

    const bnbInput = $('bnbAmount');
    const maxBNB   = $('maxBNB');
    const buyBNB   = $('buyBNB');

    if(maxBNB) maxBNB.onclick = async ()=>{
      try{
        const bal = await provider.getBalance(acct);
        const buffer = ethers.utils.parseEther("0.0005");
        const spend = bal.gt(buffer)? bal.sub(buffer): ethers.constants.Zero;
        if(bnbInput) bnbInput.value = fmtUnits(spend,18);
        ok('Max BNB filled (minus gas buffer).');
      }catch(e){ er(e.message || 'Failed to read BNB balance'); }
    };

    if(buyBNB) buyBNB.onclick = async ()=>{
      try{
        const val = parseFloatSafe(bnbInput?.value || '0');
        if(!val || val<=0) return er('Enter BNB amount');
        const tx = await presale.buyWithBNB({ value: ethers.utils.parseEther(String(val)) });
        await tx.wait();
        ok('Success: bought with BNB');
        await refreshStats();
      }catch(e){ er(e?.data?.message || e.message || 'BNB transaction failed'); }
    };

    const usdtAmt  = $('usdtAmount');
    const maxUSDT  = $('maxUSDT');
    const buyUSDa  = $('buyUSDT_amount');

    if(maxUSDT) maxUSDT.onclick = async ()=>{
      try{
        const dec = await usdt.decimals();
        const bal = await usdt.balanceOf(acct);
        const human = fmtUnits(bal, dec);
        if(usdtAmt) usdtAmt.value = human;

        const usdtWei  = ethers.utils.parseUnits(human, dec);
        const altruWei = usdtWei.mul(RATE);
        const altruEl  = $('altruAmount');
        if(altruEl) altruEl.value = ethers.utils.formatUnits(altruWei, 18);
        ok('Max USDT filled (and ALTRU equivalent).');
      }catch(e){ er(e.message || 'Failed to read USDT balance'); }
    };

    if(buyUSDa) buyUSDa.onclick = async ()=>{
      try{
        const dec = await usdt.decimals();
        const amt = parseFloatSafe(usdtAmt?.value || '0');
        if(!amt || amt<=0) return er('Enter USDT amount');
        const usdtWei = ethers.utils.parseUnits(String(amt), dec);

        const allowance = await usdt.allowance(acct, PRESALE_ADDRESS);
        if(allowance.lt(usdtWei)){
          const txA = await usdt.approve(PRESALE_ADDRESS, usdtWei);
          await txA.wait();
        }
        const tx = await presale.buyWithUSDT(usdtWei);
        await tx.wait();
        ok(`Success: bought with ${amt} USDT`);
        await refreshStats();
      }catch(e){ er(e?.data?.message || e.message || 'USDT transaction failed'); }
    };

    const altruAmt = $('altruAmount');
    const buyUSDTb = $('buyUSDT_altru');

    if(buyUSDTb) buyUSDTb.onclick = async ()=>{
      try{
        const a = parseFloatSafe(altruAmt?.value || '0');
        if(!a || a<=0) return er('Enter ALTRU amount');

        const altruWei = ethers.utils.parseUnits(String(a), 18);
        const rateBN   = ethers.BigNumber.from(RATE.toString());
        const usdtWei  = altruWei.add(rateBN.sub(1)).div(rateBN); // ceil

        const allowance = await usdt.allowance(acct, PRESALE_ADDRESS);
        if(allowance.lt(usdtWei)){
          const txA = await usdt.approve(PRESALE_ADDRESS, usdtWei);
          await txA.wait();
        }
        const tx = await presale.buyWithUSDT(usdtWei);
        await tx.wait();
        ok(`Success: bought ${a} ALTRU with USDT`);
        await refreshStats();
      }catch(e){ er(e?.data?.message || e.message || 'USDT transaction failed'); }
    };

  })();
  </script>
</body>
</html>
